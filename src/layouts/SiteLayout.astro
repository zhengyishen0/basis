---
import Layout from './Layout.astro';
import Navbar from '@/components/ui/display/Navbar.astro';
import Button from '@/components/ui/forms/Button.astro';
import { Icon } from 'astro-icon/components';
import { List, ListItems, Row } from '@/components/ui/layout';

export interface Props {
    title: string;
    description?: string;
}

const { title, description } = Astro.props;

// Navigation links
const navLinks = [
    { label: 'Docs', href: '/docs' },
    { label: 'Components', href: '/demo' },
    { label: 'Todo', href: '/todo' },
];
---

<Layout title={title} description={description}>
    <div class="min-h-screen flex flex-col">
        <!-- Site-wide Navbar with Alpine.js dynamic rendering -->
        <Navbar x-data={`{ links: ${JSON.stringify(navLinks)} }`}>
            <a
                slot="brand"
                href="/"
                class="flex items-center space-x-2 font-bold text-xl hover:text-primary transition-colors"
            >
                <span>Basis Stack</span>
            </a>

            <Row slot="links">
                <template x-for="link in links" :key="link.href">
                    <Button
                        :href="link.href"
                        variant="ghost"
                        x-text="link.label"
                        size="sm"
                    />
                </template>
            </Row>

            <Row slot="actions">
                <Button
                    href="https://github.com/zhengyishen0/basis"
                    target="_blank"
                    size="sm"
                >
                    GitHub
                </Button>

                <!-- Mobile menu button -->
                <Button
                    variant="ghost"
                    size="icon"
                    className="md:hidden"
                    x-on:click="$dispatch('toggle-mobile-menu')"
                >
                    <Icon name="lucide:menu" class="w-5 h-5" />
                </Button>
            </Row>
        </Navbar>

        <!-- Mobile menu (hidden by default) -->
        <div
            x-data={`{ open: false, links: ${JSON.stringify(navLinks)} }`}
            @toggle-mobile-menu.window="open = !open"
            x-show="open"
            x-transition
            class="md:hidden border-b bg-background"
        >
            <List>
                <ListItems x-for="link in links" :key="link.href">
                    <Button
                        :href="link.href"
                        x-text="link.label"
                        variant="ghost"
                        size="sm"
                    />
                </ListItems>
            </List>
        </div>

        <!-- Main Content -->
        <main class="flex-1">
            <slot />
        </main>
    </div>
</Layout>

---
import Layout from '../../layouts/Layout.astro';
import Card from '../../components/pine/Card.astro';
import Button from '../../components/pine/Button.astro';
import Badge from '../../components/pine/Badge.astro';
import Checkbox from '../../components/pine/Checkbox.astro';
---

<Layout title="Checkbox Component Test">
  <main class="container mx-auto px-4 py-8 max-w-4xl">
    <!-- Header -->
    <div class="text-center mb-8">
      <h1 class="text-3xl font-bold mb-4">Checkbox Component Test</h1>
      <div class="flex justify-center gap-2 mb-6">
        <Button href="/test" variant="outline" color="neutral">← Back to Test Suite</Button>
        <Button href="/test/all" variant="ghost" color="neutral">View All</Button>
      </div>
    </div>

    <!-- Default Variant Test -->
    <Card class="mb-8">
      <div class="p-6">
        <h2 class="text-2xl font-bold mb-4">Default Variant</h2>
        <div class="space-y-4">
          <!-- Basic Checkboxes -->
          <div>
            <h3 class="text-lg font-semibold mb-3">Basic Checkboxes</h3>
            <div class="space-y-3">
              <Checkbox 
                id="checkbox-1" 
                label="Unchecked checkbox" 
                description="This checkbox starts unchecked"
              />
              
              <Checkbox 
                id="checkbox-2" 
                label="Pre-checked checkbox" 
                description="This checkbox starts checked"
                checked={true}
              />
              
              <Checkbox 
                id="checkbox-3" 
                label="Disabled unchecked" 
                description="This checkbox is disabled and unchecked"
                disabled={true}
              />
              
              <Checkbox 
                id="checkbox-4" 
                label="Disabled checked" 
                description="This checkbox is disabled but checked"
                checked={true}
                disabled={true}
              />
            </div>
          </div>

          <!-- Labels Only -->
          <div>
            <h3 class="text-lg font-semibold mb-3">Labels Only (No Descriptions)</h3>
            <div class="space-y-3">
              <Checkbox id="label-only-1" label="Accept terms and conditions" />
              <Checkbox id="label-only-2" label="Subscribe to newsletter" />
              <Checkbox id="label-only-3" label="Enable notifications" checked={true} />
              <Checkbox id="label-only-4" label="Remember my preferences" disabled={true} />
            </div>
          </div>

          <!-- No Labels (Custom) -->
          <div>
            <h3 class="text-lg font-semibold mb-3">Checkboxes Without Labels</h3>
            <div class="flex gap-4">
              <Checkbox id="no-label-1" />
              <Checkbox id="no-label-2" checked={true} />
              <Checkbox id="no-label-3" disabled={true} />
              <Checkbox id="no-label-4" checked={true} disabled={true} />
            </div>
          </div>
        </div>
      </div>
    </Card>

    <!-- Custom Variant Test -->
    <Card class="mb-8">
      <div class="p-6">
        <h2 class="text-2xl font-bold mb-4">Custom Variant</h2>
        <div class="space-y-4">
          <!-- Custom Styled Checkboxes -->
          <div>
            <h3 class="text-lg font-semibold mb-3">Custom Styled Checkboxes</h3>
            <div class="space-y-3">
              <Checkbox 
                id="custom-1" 
                variant="custom"
                label="Custom unchecked checkbox" 
                description="This uses custom styling with hidden input"
              />
              
              <Checkbox 
                id="custom-2" 
                variant="custom"
                label="Custom pre-checked checkbox" 
                description="This custom checkbox starts checked"
                checked={true}
              />
              
              <Checkbox 
                id="custom-3" 
                variant="custom"
                label="Custom disabled unchecked" 
                description="This custom checkbox is disabled"
                disabled={true}
              />
              
              <Checkbox 
                id="custom-4" 
                variant="custom"
                label="Custom disabled checked" 
                description="This custom checkbox is disabled but checked"
                checked={true}
                disabled={true}
              />
            </div>
          </div>

          <!-- Custom Labels Only -->
          <div>
            <h3 class="text-lg font-semibold mb-3">Custom Labels Only</h3>
            <div class="space-y-3">
              <Checkbox id="custom-label-1" variant="custom" label="Enable dark mode" />
              <Checkbox id="custom-label-2" variant="custom" label="Auto-save documents" checked={true} />
              <Checkbox id="custom-label-3" variant="custom" label="Show tooltips" />
              <Checkbox id="custom-label-4" variant="custom" label="Beta features" disabled={true} />
            </div>
          </div>
        </div>
      </div>
    </Card>

    <!-- Interactive Demo -->
    <Card class="mb-8">
      <div class="p-6">
        <h2 class="text-2xl font-bold mb-4">Interactive Demo</h2>
        <div x-data="{ 
          checkboxes: [
            { id: 'demo-1', label: 'Option 1', checked: false, disabled: false },
            { id: 'demo-2', label: 'Option 2', checked: true, disabled: false },
            { id: 'demo-3', label: 'Option 3', checked: false, disabled: true },
            { id: 'demo-4', label: 'Option 4', checked: true, disabled: true }
          ],
          
          get checkedCount() {
            return this.checkboxes.filter(cb => cb.checked && !cb.disabled).length;
          },
          
          toggleAll() {
            const shouldCheck = this.checkedCount === 0;
            this.checkboxes.forEach(cb => {
              if (!cb.disabled) {
                cb.checked = shouldCheck;
              }
            });
          },
          
          selectNone() {
            this.checkboxes.forEach(cb => {
              if (!cb.disabled) {
                cb.checked = false;
              }
            });
          }
        }">
          <div class="space-y-4">
            <div class="flex gap-4 mb-6">
              <Button @click="toggleAll()" variant="solid" color="blue" size="sm">
                Toggle All
              </Button>
              <Button @click="selectNone()" variant="outline" color="neutral" size="sm">
                Clear All
              </Button>
              <Badge variant="soft" color="blue">
                <span x-text="checkedCount"></span> selected
              </Badge>
            </div>
            
            <div class="space-y-3">
              <template x-for="(checkbox, index) in checkboxes" :key="checkbox.id">
                <div class="flex items-center">
                  <Checkbox 
                    :id="checkbox.id"
                    :label="checkbox.label"
                    :checked="checkbox.checked"
                    :disabled="checkbox.disabled"
                    x-model="checkbox.checked"
                    variant="custom"
                  />
                </div>
              </template>
            </div>
            
            <div class="mt-6 p-4 bg-gray-50 rounded-lg">
              <h4 class="font-semibold mb-2">Selected Options:</h4>
              <template x-for="checkbox in checkboxes.filter(cb => cb.checked)" :key="checkbox.id">
                <Badge variant="soft" color="green" size="sm" class="mr-2 mb-1" x-text="checkbox.label"></Badge>
              </template>
              <p x-show="checkedCount === 0" class="text-gray-500 text-sm">No options selected</p>
            </div>
          </div>
        </div>
      </div>
    </Card>

    <!-- Form Integration Example -->
    <Card class="mb-8">
      <div class="p-6">
        <h2 class="text-2xl font-bold mb-4">Form Integration Example</h2>
        <form x-data="{ 
          formData: {
            newsletter: false,
            terms: false,
            privacy: false,
            marketing: false
          },
          
          get isValid() {
            return this.formData.terms && this.formData.privacy;
          },
          
          submitForm() {
            if (this.isValid) {
              alert('Form submitted successfully!\\n\\nData: ' + JSON.stringify(this.formData, null, 2));
            } else {
              alert('Please accept the required terms and privacy policy.');
            }
          }
        }" @submit.prevent="submitForm()">
          <div class="space-y-4">
            <h3 class="text-lg font-semibold">Account Preferences</h3>
            
            <Checkbox 
              id="form-newsletter" 
              name="newsletter"
              label="Subscribe to newsletter"
              description="Receive updates about new features and content"
              x-model="formData.newsletter"
            />
            
            <Checkbox 
              id="form-marketing" 
              name="marketing"
              label="Marketing emails"
              description="Receive promotional offers and marketing content"
              x-model="formData.marketing"
            />
            
            <hr class="my-6" />
            
            <h4 class="font-semibold text-red-600">Required</h4>
            
            <Checkbox 
              id="form-terms" 
              name="terms"
              label="I accept the Terms of Service"
              description="You must accept our terms to create an account"
              x-model="formData.terms"
              variant="custom"
              required
            />
            
            <Checkbox 
              id="form-privacy" 
              name="privacy"
              label="I accept the Privacy Policy"
              description="You must accept our privacy policy to continue"
              x-model="formData.privacy"
              variant="custom"
              required
            />
            
            <div class="pt-4">
              <Button 
                type="submit"
                variant="solid" 
                color="blue"
                :class="!isValid ? 'opacity-50 cursor-not-allowed' : ''"
              >
                Create Account
              </Button>
              
              <div class="mt-4 p-3 bg-gray-50 rounded-lg">
                <h5 class="font-semibold mb-2">Form State:</h5>
                <div class="text-sm text-gray-600">
                  <div>Newsletter: <span x-text="formData.newsletter ? 'Yes' : 'No'"></span></div>
                  <div>Marketing: <span x-text="formData.marketing ? 'Yes' : 'No'"></span></div>
                  <div>Terms: <span x-text="formData.terms ? 'Accepted' : 'Not accepted'"></span></div>
                  <div>Privacy: <span x-text="formData.privacy ? 'Accepted' : 'Not accepted'"></span></div>
                  <div class="mt-2">
                    <Badge :color="isValid ? 'green' : 'red'" variant="soft" size="sm">
                      <span x-text="isValid ? 'Valid' : 'Invalid'"></span>
                    </Badge>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </form>
      </div>
    </Card>

    <!-- Custom Styling Examples -->
    <Card class="mb-8">
      <div class="p-6">
        <h2 class="text-2xl font-bold mb-4">Custom Styling Examples</h2>
        <div class="space-y-6">
          <!-- Grouped Checkboxes -->
          <div>
            <h3 class="text-lg font-semibold mb-3">Grouped Options</h3>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
              <div class="p-4 border border-gray-200 rounded-lg">
                <h4 class="font-semibold mb-3">Notification Preferences</h4>
                <div class="space-y-2">
                  <Checkbox id="notif-email" label="Email notifications" variant="custom" />
                  <Checkbox id="notif-sms" label="SMS notifications" variant="custom" />
                  <Checkbox id="notif-push" label="Push notifications" variant="custom" checked={true} />
                </div>
              </div>
              
              <div class="p-4 border border-gray-200 rounded-lg">
                <h4 class="font-semibold mb-3">Display Options</h4>
                <div class="space-y-2">
                  <Checkbox id="display-dark" label="Dark mode" variant="custom" />
                  <Checkbox id="display-compact" label="Compact view" variant="custom" checked={true} />
                  <Checkbox id="display-sidebar" label="Show sidebar" variant="custom" checked={true} />
                </div>
              </div>
            </div>
          </div>

          <!-- Large Touch-Friendly Checkboxes -->
          <div>
            <h3 class="text-lg font-semibold mb-3">Touch-Friendly (Mobile)</h3>
            <div class="space-y-1">
              <Checkbox 
                id="mobile-1" 
                label="Large touch target" 
                variant="custom"
                class="p-3 border border-gray-200 rounded-lg hover:bg-gray-50"
                labelClass="text-lg"
              />
              <Checkbox 
                id="mobile-2" 
                label="Another large option" 
                variant="custom"
                class="p-3 border border-gray-200 rounded-lg hover:bg-gray-50"
                labelClass="text-lg"
                checked={true}
              />
            </div>
          </div>
        </div>
      </div>
    </Card>

    <!-- Status Summary -->
    <Card>
      <div class="p-6">
        <h2 class="text-2xl font-bold mb-4">Test Results</h2>
        <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
          <div class="text-center p-4 bg-green-50 rounded-lg">
            <Badge color="green" class="mb-2">✓ Working</Badge>
            <p class="text-sm">Default variant working</p>
          </div>
          <div class="text-center p-4 bg-green-50 rounded-lg">
            <Badge color="green" class="mb-2">✓ Working</Badge>
            <p class="text-sm">Custom variant styling</p>
          </div>
          <div class="text-center p-4 bg-green-50 rounded-lg">
            <Badge color="green" class="mb-2">✓ Working</Badge>
            <p class="text-sm">Disabled states</p>
          </div>
          <div class="text-center p-4 bg-green-50 rounded-lg">
            <Badge color="green" class="mb-2">✓ Working</Badge>
            <p class="text-sm">Form integration</p>
          </div>
        </div>
      </div>
    </Card>
  </main>
</Layout>
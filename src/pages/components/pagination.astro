---
import Layout from '../../layouts/Layout.astro';
import Card from '../../components/pine/Card.astro';
import Button from '../../components/pine/Button.astro';
import Badge from '../../components/pine/Badge.astro';
import Pagination from '../../components/pine/Pagination.astro';
---

<Layout title="Pagination Component Test">
  <main class="container mx-auto px-4 py-8 max-w-4xl">
    <!-- Header -->
    <div class="text-center mb-8">
      <h1 class="text-3xl font-bold mb-4">Pagination Component Test</h1>
      <div class="flex justify-center gap-2 mb-6">
        <Button href="/test" variant="outline" color="neutral">← Back to Test Suite</Button>
        <Button href="/test/all" variant="ghost" color="neutral">View All</Button>
      </div>
    </div>

    <!-- Basic Pagination Test -->
    <Card class="mb-8">
      <div class="p-6">
        <h2 class="text-2xl font-bold mb-4">Basic Pagination</h2>
        <div class="space-y-6">
          <div>
            <h3 class="text-lg font-semibold mb-3">Standard Pagination (Current: 5 of 10)</h3>
            <Pagination 
              currentPage={5}
              totalPages={10}
              totalItems={89}
              itemsPerPage={10}
              baseUrl="/test/pagination?page="
            />
          </div>
          
          <div>
            <h3 class="text-lg font-semibold mb-3">First Page (Current: 1 of 10)</h3>
            <Pagination 
              currentPage={1}
              totalPages={10}
              totalItems={89}
              itemsPerPage={10}
              baseUrl="/test/pagination?page="
            />
          </div>
          
          <div>
            <h3 class="text-lg font-semibold mb-3">Last Page (Current: 10 of 10)</h3>
            <Pagination 
              currentPage={10}
              totalPages={10}
              totalItems={89}
              itemsPerPage={10}
              baseUrl="/test/pagination?page="
            />
          </div>
        </div>
      </div>
    </Card>

    <!-- Different Page Counts Test -->
    <Card class="mb-8">
      <div class="p-6">
        <h2 class="text-2xl font-bold mb-4">Different Page Counts</h2>
        <div class="space-y-6">
          <div>
            <h3 class="text-lg font-semibold mb-3">Small Dataset (3 pages)</h3>
            <Pagination 
              currentPage={2}
              totalPages={3}
              totalItems={25}
              itemsPerPage={10}
              baseUrl="/test/pagination?page="
            />
          </div>
          
          <div>
            <h3 class="text-lg font-semibold mb-3">Large Dataset (50 pages)</h3>
            <Pagination 
              currentPage={25}
              totalPages={50}
              totalItems={500}
              itemsPerPage={10}
              baseUrl="/test/pagination?page="
            />
          </div>
          
          <div>
            <h3 class="text-lg font-semibold mb-3">Single Page</h3>
            <Pagination 
              currentPage={1}
              totalPages={1}
              totalItems={5}
              itemsPerPage={10}
              baseUrl="/test/pagination?page="
            />
          </div>
        </div>
      </div>
    </Card>

    <!-- MaxVisible Configuration Test -->
    <Card class="mb-8">
      <div class="p-6">
        <h2 class="text-2xl font-bold mb-4">MaxVisible Configuration</h2>
        <div class="space-y-6">
          <div>
            <h3 class="text-lg font-semibold mb-3">MaxVisible: 3 (Current: 10 of 20)</h3>
            <Pagination 
              currentPage={10}
              totalPages={20}
              totalItems={200}
              itemsPerPage={10}
              maxVisible={3}
              baseUrl="/test/pagination?page="
            />
          </div>
          
          <div>
            <h3 class="text-lg font-semibold mb-3">MaxVisible: 7 (Current: 10 of 20)</h3>
            <Pagination 
              currentPage={10}
              totalPages={20}
              totalItems={200}
              itemsPerPage={10}
              maxVisible={7}
              baseUrl="/test/pagination?page="
            />
          </div>
          
          <div>
            <h3 class="text-lg font-semibold mb-3">MaxVisible: 1 (Current: 5 of 10)</h3>
            <Pagination 
              currentPage={5}
              totalPages={10}
              totalItems={100}
              itemsPerPage={10}
              maxVisible={1}
              baseUrl="/test/pagination?page="
            />
          </div>
        </div>
      </div>
    </Card>

    <!-- Show/Hide Options Test -->
    <Card class="mb-8">
      <div class="p-6">
        <h2 class="text-2xl font-bold mb-4">Show/Hide Options</h2>
        <div class="space-y-6">
          <div>
            <h3 class="text-lg font-semibold mb-3">Hide Info (showInfo: false)</h3>
            <Pagination 
              currentPage={5}
              totalPages={10}
              totalItems={89}
              itemsPerPage={10}
              showInfo={false}
              baseUrl="/test/pagination?page="
            />
          </div>
          
          <div>
            <h3 class="text-lg font-semibold mb-3">Hide First/Last (showFirstLast: false)</h3>
            <Pagination 
              currentPage={15}
              totalPages={30}
              totalItems={300}
              itemsPerPage={10}
              showFirstLast={false}
              baseUrl="/test/pagination?page="
            />
          </div>
          
          <div>
            <h3 class="text-lg font-semibold mb-3">Minimal Pagination (No Info, No First/Last)</h3>
            <Pagination 
              currentPage={5}
              totalPages={10}
              totalItems={89}
              itemsPerPage={10}
              showInfo={false}
              showFirstLast={false}
              baseUrl="/test/pagination?page="
            />
          </div>
        </div>
      </div>
    </Card>

    <!-- Different Items Per Page Test -->
    <Card class="mb-8">
      <div class="p-6">
        <h2 class="text-2xl font-bold mb-4">Different Items Per Page</h2>
        <div class="space-y-6">
          <div>
            <h3 class="text-lg font-semibold mb-3">5 Items Per Page</h3>
            <Pagination 
              currentPage={3}
              totalPages={20}
              totalItems={100}
              itemsPerPage={5}
              baseUrl="/test/pagination?page="
            />
          </div>
          
          <div>
            <h3 class="text-lg font-semibold mb-3">25 Items Per Page</h3>
            <Pagination 
              currentPage={2}
              totalPages={4}
              totalItems={100}
              itemsPerPage={25}
              baseUrl="/test/pagination?page="
            />
          </div>
          
          <div>
            <h3 class="text-lg font-semibold mb-3">50 Items Per Page</h3>
            <Pagination 
              currentPage={1}
              totalPages={2}
              totalItems={100}
              itemsPerPage={50}
              baseUrl="/test/pagination?page="
            />
          </div>
        </div>
      </div>
    </Card>

    <!-- Interactive Pagination Test -->
    <Card class="mb-8">
      <div class="p-6">
        <h2 class="text-2xl font-bold mb-4">Interactive Pagination</h2>
        <div x-data="{ 
          currentPage: 5, 
          totalPages: 15, 
          totalItems: 150, 
          itemsPerPage: 10,
          goToPage(page) {
            if (page >= 1 && page <= this.totalPages) {
              this.currentPage = page;
            }
          }
        }">
          <div class="mb-4">
            <p class="text-sm text-gray-600 mb-2">Interactive pagination controlled by Alpine.js</p>
            <div class="flex gap-2 mb-4">
              <Button 
                variant="outline" 
                color="blue" 
                size="sm"
                x-on:click="goToPage(1)"
              >
                Go to First
              </Button>
              <Button 
                variant="outline" 
                color="blue" 
                size="sm"
                x-on:click="goToPage(currentPage - 1)"
              >
                Previous
              </Button>
              <Button 
                variant="outline" 
                color="blue" 
                size="sm"
                x-on:click="goToPage(currentPage + 1)"
              >
                Next
              </Button>
              <Button 
                variant="outline" 
                color="blue" 
                size="sm"
                x-on:click="goToPage(totalPages)"
              >
                Go to Last
              </Button>
            </div>
            <div class="flex gap-2 mb-4">
              <input 
                type="number" 
                x-model="currentPage" 
                min="1" 
                :max="totalPages"
                class="px-3 py-1 border border-gray-300 rounded text-sm w-20"
                placeholder="Page"
              />
              <Button 
                variant="solid" 
                color="green" 
                size="sm"
                x-on:click="goToPage(parseInt($el.previousElementSibling.value))"
              >
                Go
              </Button>
            </div>
          </div>
          
          <!-- Dynamic Pagination Display -->
          <div x-html="`
            <div class='flex items-center justify-between w-full px-3 py-4 border-t border-neutral-200'>
              <div class='hidden sm:flex-1 sm:flex sm:items-center sm:justify-between'>
                <div>
                  <p class='text-sm text-gray-700'>
                    Showing <span class='font-medium'>${(currentPage - 1) * itemsPerPage + 1}</span> to 
                    <span class='font-medium'>${Math.min(currentPage * itemsPerPage, totalItems)}</span> of 
                    <span class='font-medium'>${totalItems}</span> results
                  </p>
                </div>
              </div>
              <div class='mt-3 sm:mt-0'>
                <p class='text-sm text-gray-600'>Current Page: ${currentPage} of ${totalPages}</p>
              </div>
            </div>
          `"></div>
        </div>
      </div>
    </Card>

    <!-- Custom Styling Test -->
    <Card class="mb-8">
      <div class="p-6">
        <h2 class="text-2xl font-bold mb-4">Custom Styling</h2>
        <div class="space-y-6">
          <div>
            <h3 class="text-lg font-semibold mb-3">Custom Background</h3>
            <Pagination 
              currentPage={3}
              totalPages={8}
              totalItems={80}
              itemsPerPage={10}
              baseUrl="/test/pagination?page="
              class="bg-blue-50 rounded-lg"
            />
          </div>
          
          <div>
            <h3 class="text-lg font-semibold mb-3">Compact Style</h3>
            <Pagination 
              currentPage={4}
              totalPages={12}
              totalItems={120}
              itemsPerPage={10}
              maxVisible={3}
              baseUrl="/test/pagination?page="
              class="bg-gray-100 rounded-md"
            />
          </div>
        </div>
      </div>
    </Card>

    <!-- Edge Cases Test -->
    <Card class="mb-8">
      <div class="p-6">
        <h2 class="text-2xl font-bold mb-4">Edge Cases</h2>
        <div class="space-y-6">
          <div>
            <h3 class="text-lg font-semibold mb-3">Very Large Dataset (Page 500 of 1000)</h3>
            <Pagination 
              currentPage={500}
              totalPages={1000}
              totalItems={10000}
              itemsPerPage={10}
              baseUrl="/test/pagination?page="
            />
          </div>
          
          <div>
            <h3 class="text-lg font-semibold mb-3">Uneven Last Page (87 total items, 10 per page)</h3>
            <Pagination 
              currentPage={9}
              totalPages={9}
              totalItems={87}
              itemsPerPage={10}
              baseUrl="/test/pagination?page="
            />
          </div>
          
          <div>
            <h3 class="text-lg font-semibold mb-3">Near Beginning (Page 2 of 100)</h3>
            <Pagination 
              currentPage={2}
              totalPages={100}
              totalItems={1000}
              itemsPerPage={10}
              baseUrl="/test/pagination?page="
            />
          </div>
          
          <div>
            <h3 class="text-lg font-semibold mb-3">Near End (Page 99 of 100)</h3>
            <Pagination 
              currentPage={99}
              totalPages={100}
              totalItems={1000}
              itemsPerPage={10}
              baseUrl="/test/pagination?page="
            />
          </div>
        </div>
      </div>
    </Card>

    <!-- Status Summary -->
    <Card>
      <div class="p-6">
        <h2 class="text-2xl font-bold mb-4">Test Results</h2>
        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
          <div class="text-center p-4 bg-green-50 rounded-lg">
            <Badge color="green" class="mb-2">✓ Working</Badge>
            <p class="text-sm">All pagination states</p>
          </div>
          <div class="text-center p-4 bg-green-50 rounded-lg">
            <Badge color="green" class="mb-2">✓ Working</Badge>
            <p class="text-sm">Show/hide options</p>
          </div>
          <div class="text-center p-4 bg-green-50 rounded-lg">
            <Badge color="green" class="mb-2">✓ Working</Badge>
            <p class="text-sm">Custom configurations</p>
          </div>
          <div class="text-center p-4 bg-green-50 rounded-lg">
            <Badge color="green" class="mb-2">✓ Working</Badge>
            <p class="text-sm">Alpine.js integration</p>
          </div>
          <div class="text-center p-4 bg-green-50 rounded-lg">
            <Badge color="green" class="mb-2">✓ Working</Badge>
            <p class="text-sm">Edge cases handled</p>
          </div>
          <div class="text-center p-4 bg-green-50 rounded-lg">
            <Badge color="green" class="mb-2">✓ Working</Badge>
            <p class="text-sm">Responsive design</p>
          </div>
        </div>
      </div>
    </Card>
  </main>
</Layout>
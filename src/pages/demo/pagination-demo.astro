---
import Layout from '@/layouts/Layout.astro';
import {
    Pagination,
    PaginationItem,
    PaginationLink,
    PaginationPrevious,
    PaginationNext,
    PaginationEllipsis,
} from '@/components/ui/navigation';
---

<Layout title="Pagination Demo">
    <div class="max-w-4xl mx-auto p-8 space-y-12">
        <header>
            <h1 class="text-3xl font-bold mb-2">Pagination Component Demo</h1>
            <p class="text-muted-foreground">
                Composable Alpine.js pagination with x-for support and
                customizable sub-components.
            </p>
        </header>

        <!-- Basic Composable Pagination -->
        <section class="space-y-4">
            <div>
                <h2 class="text-xl font-semibold mb-2">Basic Composable Pagination</h2>
                <p class="text-sm text-muted-foreground mb-4">
                    Simple composable usage with default info display
                </p>
            </div>
            <div class="border rounded-lg p-6">
                <Pagination
                    currentPage={3}
                    totalPages={10}
                    totalItems={89}
                    pageSize={10}
                >
                    <span slot="info" class="text-sm text-muted-foreground">
                        Showing <span class="font-medium" x-text="startItem"></span> to 
                        <span class="font-medium" x-text="endItem"></span> of 
                        <span class="font-medium" x-text="totalItems"></span> results
                    </span>

                    <PaginationPrevious />
                    
                    <PaginationItem x-for="page in visiblePages" x-key="page.number">
                        <PaginationLink
                            slot="link"
                            x-bind:is-active="page.current"
                            x-on:click="goToPage(page.number)"
                            x-text="page.number"
                        />
                        <PaginationEllipsis
                            slot="ellipsis"
                            x-text="page.number"
                        />
                    </PaginationItem>
                    
                    <PaginationNext />
                </Pagination>
            </div>
        </section>

        <!-- Custom Composable Pagination -->
        <section class="space-y-4">
            <div>
                <h2 class="text-xl font-semibold mb-2">
                    Composable Pagination
                </h2>
                <p class="text-sm text-muted-foreground mb-4">
                    Using sub-components with x-for for full customization
                </p>
            </div>
            <div class="border rounded-lg p-6">
                <Pagination
                    currentPage={5}
                    totalPages={15}
                    totalItems={150}
                    pageSize={10}
                    showInfo={true}
                >
                    <!-- Custom info slot -->
                    <div slot="info">
                        <p class="text-sm text-blue-600 font-medium">
                            Custom info: Page <span x-text="currentPage"></span>
                            of <span x-text="totalPages"></span>
                        </p>
                    </div>

                    <!-- Custom navigation with composable components -->
                    <PaginationPrevious />

                    <!-- Dynamic page numbers with x-for -->
                    <PaginationItem x-for="page in visiblePages" x-key="page.number">
                        <PaginationLink
                            slot="link"
                            x-bind:is-active="page.current"
                            x-on:click="goToPage(page.number)"
                            x-text="page.number"
                        />
                        <PaginationEllipsis
                            slot="ellipsis"
                            x-text="page.number"
                        />
                    </PaginationItem>

                    <PaginationNext />
                </Pagination>
            </div>
        </section>

        <!-- Compact Example -->
        <section class="space-y-4">
            <div>
                <h2 class="text-xl font-semibold mb-2">Compact Example</h2>
                <p class="text-sm text-muted-foreground mb-4">
                    Fewer visible pages, no info display
                </p>
            </div>
            <div class="border rounded-lg p-6">
                <Pagination
                    currentPage={2}
                    totalPages={5}
                    totalItems={45}
                    pageSize={10}
                    showFirstLast={false}
                    maxVisible={3}
                    showInfo={false}
                >
                    <PaginationPrevious />
                    
                    <PaginationItem x-for="page in visiblePages" x-key="page.number">
                        <PaginationLink
                            slot="link"
                            x-bind:is-active="page.current"
                            x-on:click="goToPage(page.number)"
                            x-text="page.number"
                        />
                        <PaginationEllipsis
                            slot="ellipsis"
                            x-text="page.number"
                        />
                    </PaginationItem>
                    
                    <PaginationNext />
                </Pagination>
            </div>
        </section>

        <!-- Interactive Demo -->
        <section class="space-y-4">
            <div>
                <h2 class="text-xl font-semibold mb-2">Interactive Demo</h2>
                <p class="text-sm text-muted-foreground mb-4">
                    Click buttons to see Alpine.js state management in action
                </p>
            </div>
            <div
                class="border rounded-lg p-6"
                x-data="{ currentDemo: 1, totalDemo: 20 }"
            >
                <div class="mb-4 p-4 bg-muted rounded-lg">
                    <h3 class="font-medium mb-2">Current State:</h3>
                    <p class="text-sm">
                        Current Page: <span
                            class="font-mono"
                            x-text="currentDemo"></span>
                    </p>
                    <p class="text-sm">
                        Total Pages: <span class="font-mono" x-text="totalDemo"
                        ></span>
                    </p>
                </div>

                <Pagination
                    x-bind:current-page="currentDemo"
                    x-bind:total-pages="totalDemo"
                    total-items={200}
                    page-size={10}
                    @page-change="currentDemo = $event.detail.page"
                >
                    <div slot="info" class="text-sm text-green-600 font-medium">
                        Interactive: <span x-text="startItem"></span>-<span x-text="endItem"></span> of <span x-text="totalItems"></span>
                    </div>

                    <PaginationPrevious />
                    
                    <PaginationItem x-for="page in visiblePages" x-key="page.number">
                        <PaginationLink
                            slot="link"
                            x-bind:is-active="page.current"
                            x-on:click="goToPage(page.number)"
                            x-text="page.number"
                        />
                        <PaginationEllipsis
                            slot="ellipsis"
                            x-text="page.number"
                        />
                    </PaginationItem>
                    
                    <PaginationNext />
                </Pagination>
            </div>
        </section>
    </div>
</Layout>

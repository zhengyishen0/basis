---
import Layout from '@/layouts/Layout.astro';
import {
    ContextMenu,
    ContextMenuTrigger,
    ContextMenuContent,
    ContextMenuItem,
    ContextMenuGroup,
    ContextMenuSubMenu,
    ContextMenuSubTrigger,
    ContextMenuShortcut,
    ContextMenuConditional,
} from '@/components/ui/overlay/contextmenu';
import { Divider } from '@/components/ui/layout';
---

<Layout title="Context Menu Demo">
    <main class="container mx-auto p-8 space-y-12">
        <div class="text-center">
            <h1 class="text-3xl font-bold mb-4">Context Menu Component Demo</h1>
            <p class="text-muted-foreground mb-8">
                Composable context menu components with keyboard navigation,
                submenus, and smart positioning
            </p>
        </div>

        <!-- Dynamic x-for Example -->
        <section class="space-y-6">
            <h2 class="text-2xl font-semibold">Dynamic x-for Support</h2>

            <div
                x-data="{
                    menuGroups: [
                        {
                            heading: 'File Actions',
                            items: [
                                { text: 'New File', shortcut: 'Ctrl+N' },
                                { text: 'Open File', shortcut: 'Ctrl+O' },
                                { text: 'Save File', shortcut: 'Ctrl+S' }
                            ]
                        },
                        {
                            heading: 'Edit Actions', 
                            items: [
                                { text: 'Cut', shortcut: 'Ctrl+X' },
                                { text: 'Copy', shortcut: 'Ctrl+C' },
                                { text: 'Paste', shortcut: 'Ctrl+V' },
                                { 
                                    text: 'Share', 
                                    submenu: [
                                        { text: 'Email' },
                                        { text: 'Copy Link' },
                                        { text: 'Social Media' }
                                    ]
                                },
                                { 
                                    text: 'Export', 
                                    submenu: [
                                        { text: 'PDF' },
                                        { text: 'Excel' },
                                        { text: 'Image' }
                                    ]
                                }
                            ]
                        },
                    ]
                }"
                class="text-center"
            >
                <ContextMenu trigger="rightclick">
                    <ContextMenuTrigger>
                        <div
                            class="w-64 h-40 bg-gradient-to-br from-cyan-50 to-blue-100 border rounded-lg flex items-center justify-center mx-auto"
                        >
                            <span class="text-center">
                                Right-click for dynamic menu
                            </span>
                        </div>
                    </ContextMenuTrigger>
                    <ContextMenuContent>
                        <ContextMenuGroup
                            x-for="group in menuGroups"
                            x-key="group.heading"
                        >
                            <div
                                x-text="group.heading"
                                class="px-3 py-1.5 text-xs font-semibold text-muted-foreground"
                            >
                            </div>
                            <ContextMenuConditional
                                x-for="item in group.items"
                                x-key="item.text"
                                condition="!item.submenu"
                            >
                                <!-- True slot: Regular menu items -->
                                <ContextMenuItem slot="true">
                                    <span x-text="item.text" class="flex-1"
                                    ></span>
                                    <ContextMenuShortcut
                                        x-text="item.shortcut"
                                    />
                                </ContextMenuItem>

                                <!-- False slot: Submenu items -->
                                <ContextMenuSubMenu slot="false">
                                    <ContextMenuSubTrigger>
                                        <span x-text="item.text"></span>
                                    </ContextMenuSubTrigger>
                                    <ContextMenuItem
                                        slot="submenu"
                                        x-for="subitem in item.submenu"
                                        x-key="subitem.text"
                                    >
                                        <span
                                            x-text="subitem.text"
                                            class="flex-1"></span>
                                    </ContextMenuItem>
                                </ContextMenuSubMenu>
                            </ContextMenuConditional>
                        </ContextMenuGroup>
                    </ContextMenuContent>
                </ContextMenu>
            </div>
        </section>

        <!-- Basic Context Menu Example -->
        <section class="space-y-6">
            <h2 class="text-2xl font-semibold">Basic Context Menu</h2>

            <div class="text-center">
                <ContextMenu trigger="rightclick">
                    <ContextMenuTrigger>
                        <div
                            class="w-64 h-40 bg-gradient-to-br from-cyan-50 to-blue-100 border rounded-lg flex items-center justify-center mx-auto"
                        >
                            <span class="text-center">
                                Right-click for basic menu
                            </span>
                        </div>
                    </ContextMenuTrigger>
                    <ContextMenuContent>
                        <ContextMenuGroup>
                            <div
                                class="px-3 py-1.5 text-xs font-semibold text-muted-foreground"
                            >
                                File Actions
                            </div>
                            <ContextMenuItem>
                                <span class="flex-1">New File</span>
                                <ContextMenuShortcut>Ctrl+N</ContextMenuShortcut
                                >
                            </ContextMenuItem>
                            <ContextMenuItem>
                                <span class="flex-1">Open File</span>
                                <ContextMenuShortcut>Ctrl+O</ContextMenuShortcut
                                >
                            </ContextMenuItem>
                            <ContextMenuItem>
                                <span class="flex-1">Save File</span>
                                <ContextMenuShortcut>Ctrl+S</ContextMenuShortcut
                                >
                            </ContextMenuItem>
                        </ContextMenuGroup>

                        <Divider />

                        <ContextMenuGroup>
                            <div
                                class="px-3 py-1.5 text-xs font-semibold text-muted-foreground"
                            >
                                Edit Actions
                            </div>
                            <ContextMenuItem>
                                <span class="flex-1">Cut</span>
                                <ContextMenuShortcut>Ctrl+X</ContextMenuShortcut
                                >
                            </ContextMenuItem>
                            <ContextMenuItem>
                                <span class="flex-1">Copy</span>
                                <ContextMenuShortcut>Ctrl+C</ContextMenuShortcut
                                >
                            </ContextMenuItem>
                            <ContextMenuItem>
                                <span class="flex-1">Paste</span>
                                <ContextMenuShortcut>Ctrl+V</ContextMenuShortcut
                                >
                            </ContextMenuItem>

                            <ContextMenuSubMenu>
                                <ContextMenuSubTrigger>
                                    <span class="flex-1">Share</span>
                                </ContextMenuSubTrigger>

                                <ContextMenuItem slot="submenu">
                                    <span class="flex-1">Email</span>
                                </ContextMenuItem>
                                <ContextMenuItem slot="submenu">
                                    <span class="flex-1">Copy Link</span>
                                </ContextMenuItem>
                                <ContextMenuItem slot="submenu">
                                    <span class="flex-1">Social Media</span>
                                </ContextMenuItem>
                            </ContextMenuSubMenu>
                        </ContextMenuGroup>
                    </ContextMenuContent>
                </ContextMenu>
            </div>
        </section>
    </main>
</Layout>

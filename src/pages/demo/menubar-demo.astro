---
import Layout from '@/layouts/Layout.astro';
import {
    MenuBar,
    MenuBarTrigger,
    MenuBarContent,
    MenuBarItem,
    MenuBarGroup,
    MenuBarSubMenu,
    MenuBarSubTrigger,
    MenuBarShortcut,
    MenuBarConditional,
} from '@/components/ui/overlay/menubar';
import { Divider } from '@/components/ui/layout';
---

<Layout title="Menu Bar Demo">
    <main class="container mx-auto p-8 space-y-12">
        <div class="text-center">
            <h1 class="text-3xl font-bold mb-4">Menu Bar Component Demo</h1>
            <p class="text-muted-foreground mb-8">
                Horizontal menu bar with dropdowns, keyboard navigation, and
                submenus
            </p>
        </div>

        <!-- Dynamic Menu Bar Example -->
        <section class="space-y-6">
            <h2 class="text-2xl font-semibold">Dynamic Menu Bar with x-for</h2>

            <div
                x-data="{
                    menuBarData: [
                        {
                            name: 'File',
                            groups: [
                                {
                                    items: [
                                        { text: 'New File', shortcut: 'Ctrl+N' },
                                        { text: 'Open File', shortcut: 'Ctrl+O' },
                                        { text: 'Save File', shortcut: 'Ctrl+S' }
                                    ]
                                },
                                {
                                    items: [
                                        { 
                                            text: 'Recent Files', 
                                            submenu: [
                                                { text: 'project.astro' },
                                                { text: 'config.ts' },
                                                { text: 'README.md' }
                                            ]
                                        },
                                        { 
                                            text: 'Export', 
                                            submenu: [
                                                { text: 'PDF' },
                                                { text: 'HTML' },
                                                { text: 'Markdown' }
                                            ]
                                        }
                                    ]
                                },
                                {
                                    items: [
                                        { text: 'Exit', shortcut: 'Alt+F4', variant: 'destructive' }
                                    ]
                                }
                            ]
                        },
                        {
                            name: 'Edit',
                            groups: [
                                {
                                    items: [
                                        { text: 'Undo', shortcut: 'Ctrl+Z' },
                                        { text: 'Redo', shortcut: 'Ctrl+Y' }
                                    ]
                                },
                                {
                                    items: [
                                        { text: 'Cut', shortcut: 'Ctrl+X' },
                                        { text: 'Copy', shortcut: 'Ctrl+C' },
                                        { text: 'Paste', shortcut: 'Ctrl+V' }
                                    ]
                                },
                                {
                                    items: [
                                        { text: 'Find', shortcut: 'Ctrl+F' },
                                        { text: 'Replace', shortcut: 'Ctrl+H' }
                                    ]
                                }
                            ]
                        },
                        {
                            name: 'View',
                            groups: [
                                {
                                    items: [
                                        { text: 'Zoom In', shortcut: 'Ctrl++' },
                                        { text: 'Zoom Out', shortcut: 'Ctrl+-' },
                                        { text: 'Reset Zoom', shortcut: 'Ctrl+0' }
                                    ]
                                },
                                {
                                    items: [
                                        { text: 'Toggle Sidebar', shortcut: 'Ctrl+B' },
                                        { text: 'Toggle Terminal', shortcut: 'Ctrl+`' }
                                    ]
                                }
                            ]
                        },
                        {
                            name: 'Help',
                            groups: [
                                {
                                    items: [
                                        { text: 'Documentation', shortcut: 'F1' },
                                        { text: 'Keyboard Shortcuts', shortcut: 'Ctrl+/' }
                                    ]
                                },
                                {
                                    items: [
                                        { text: 'About' }
                                    ]
                                }
                            ]
                        }
                    ]
                }"
                class="border rounded-lg p-4"
            >
                <div
                    class="flex items-center space-x-1 bg-background border-b pb-2"
                >
                    <template x-for="menu in menuBarData" x-key="menu.name">
                        <MenuBar>
                            <MenuBarTrigger>
                                <span x-text="menu.name"></span>
                            </MenuBarTrigger>
                            <MenuBarContent role="menu">
                                <MenuBarGroup
                                    x-for="(group, groupIndex) in menu.groups"
                                    x-key="groupIndex"
                                    divider
                                >
                                    <MenuBarConditional
                                        x-for="item in group.items"
                                        x-key="item.text"
                                        condition="!item.submenu"
                                    >
                                        <!-- True slot: Regular menu items -->
                                        <MenuBarItem
                                            slot="true"
                                            x-text="item.text"
                                            :variant="item.variant || 'default'"
                                        >
                                            <MenuBarShortcut
                                                x-text="item.shortcut"
                                            />
                                        </MenuBarItem>

                                        <!-- False slot: Submenu items -->
                                        <MenuBarSubMenu slot="false">
                                            <MenuBarSubTrigger x-text="item.text" />
                                            <MenuBarItem
                                                slot="submenu"
                                                x-for="subitem in item.submenu"
                                                x-key="subitem.text"
                                                x-text="subitem.text"
                                            />
                                        </MenuBarSubMenu>
                                    </MenuBarConditional>
                                </MenuBarGroup>
                            </MenuBarContent>
                        </MenuBar>
                    </template>
                </div>
            </div>
        </section>

        <!-- Simple Static Example -->
        <section class="space-y-6">
            <h2 class="text-2xl font-semibold">Simple Static Example</h2>

            <div class="border rounded-lg p-4">
                <div
                    class="flex items-center space-x-1 bg-background border-b pb-2"
                >
                    <MenuBar>
                        <MenuBarTrigger> File </MenuBarTrigger>
                        <MenuBarContent role="menu">
                            <MenuBarGroup divider>
                                <!-- Using x-text for simple text -->
                                <MenuBarItem x-text="'New File'">
                                    <MenuBarShortcut>Ctrl+N</MenuBarShortcut>
                                </MenuBarItem>
                                <!-- Using slot for complex content -->
                                <MenuBarItem>
                                    <span class="flex-1">Open File</span>
                                    <MenuBarShortcut>Ctrl+O</MenuBarShortcut>
                                </MenuBarItem>
                                <MenuBarItem x-text="'Save'">
                                    <MenuBarShortcut>Ctrl+S</MenuBarShortcut>
                                </MenuBarItem>
                            </MenuBarGroup>
                            <MenuBarGroup>
                                <MenuBarItem>
                                    <span class="flex-1">Close</span>
                                    <MenuBarShortcut>Ctrl+W</MenuBarShortcut>
                                </MenuBarItem>
                                <MenuBarItem variant="destructive">
                                    <span class="flex-1">Exit</span>
                                    <MenuBarShortcut>Alt+F4</MenuBarShortcut>
                                </MenuBarItem>
                            </MenuBarGroup>
                        </MenuBarContent>
                    </MenuBar>

                    <MenuBar>
                        <MenuBarTrigger> Edit </MenuBarTrigger>
                        <MenuBarContent role="menu">
                            <MenuBarGroup divider>
                                <MenuBarItem>
                                    <span class="flex-1">Undo</span>
                                    <MenuBarShortcut>Ctrl+Z</MenuBarShortcut>
                                </MenuBarItem>
                                <MenuBarItem>
                                    <span class="flex-1">Redo</span>
                                    <MenuBarShortcut>Ctrl+Y</MenuBarShortcut>
                                </MenuBarItem>
                            </MenuBarGroup>
                            <MenuBarGroup>
                                <MenuBarItem>
                                    <span class="flex-1">Cut</span>
                                    <MenuBarShortcut>Ctrl+X</MenuBarShortcut>
                                </MenuBarItem>
                                <MenuBarItem>
                                    <span class="flex-1">Copy</span>
                                    <MenuBarShortcut>Ctrl+C</MenuBarShortcut>
                                </MenuBarItem>
                                <MenuBarItem>
                                    <span class="flex-1">Paste</span>
                                    <MenuBarShortcut>Ctrl+V</MenuBarShortcut>
                                </MenuBarItem>
                            </MenuBarGroup>
                        </MenuBarContent>
                    </MenuBar>
                </div>
            </div>
        </section>

        <!-- Usage Instructions -->
        <section class="space-y-4">
            <h2 class="text-2xl font-semibold">Usage Instructions</h2>
            <div class="bg-muted rounded-lg p-4 space-y-2 text-sm">
                <p>
                    <strong>Mouse:</strong> Click menu items to open dropdowns
                </p>
                <p>
                    <strong>Keyboard:</strong> Use Up/Down arrows within dropdowns
                </p>
                <p><strong>Escape:</strong> Close active menu</p>
                <p><strong>Enter:</strong> Activate highlighted menu item</p>
                <p>
                    <strong>Dynamic Data:</strong> The first example shows how to
                    use x-for with complex nested data structures
                </p>
            </div>
        </section>
    </main>
</Layout>

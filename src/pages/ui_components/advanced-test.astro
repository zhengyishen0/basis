---
import Layout from '../../layouts/Layout.astro';
import Card from '../../components/pine/Card.astro';
import Button from '../../components/pine/Button.astro';
import Badge from '../../components/pine/Badge.astro';
import Dropdown from '../../components/pine/Dropdown.astro';
import Tabs from '../../components/pine/Tabs.astro';
import Tooltip from '../../components/pine/Tooltip.astro';
---

<Layout title="Advanced Components Test">
  <main class="container mx-auto px-4 py-8 max-w-4xl">
    <div class="text-center mb-8">
      <h1 class="text-3xl font-bold mb-4">Advanced Components Test</h1>
      <p class="text-gray-600 mb-6">Testing complex Alpine.js interactions</p>
      <Button href="/test" variant="outline" color="neutral">← Back to Test Suite</Button>
    </div>

    <!-- Dropdown Test -->
    <Card class="mb-8">
      <div class="p-6">
        <h2 class="text-2xl font-bold mb-4">Dropdown Component</h2>
        <div class="space-y-4">
          <!-- Basic Dropdown -->
          <div>
            <h3 class="text-lg font-semibold mb-2">Basic Dropdown</h3>
            <Dropdown placement="bottom-start">
              <div slot="trigger">
                <Button variant="solid" color="blue">Open Menu</Button>
              </div>
              <div slot="menu">
                <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Profile</a>
                <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Settings</a>
                <hr class="my-1">
                <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Sign out</a>
              </div>
            </Dropdown>
          </div>

          <!-- Different Placements -->
          <div>
            <h3 class="text-lg font-semibold mb-2">Different Placements</h3>
            <div class="flex gap-4 justify-center items-center py-8">
              <Dropdown placement="top-start">
                <div slot="trigger">
                  <Button variant="outline" color="green">Top Start</Button>
                </div>
                <div slot="menu">
                  <div class="px-4 py-2 text-sm text-gray-700">Top positioned menu</div>
                </div>
              </Dropdown>

              <Dropdown placement="bottom-end">
                <div slot="trigger">
                  <Button variant="outline" color="purple">Bottom End</Button>
                </div>
                <div slot="menu">
                  <div class="px-4 py-2 text-sm text-gray-700">Bottom end positioned</div>
                </div>
              </Dropdown>

              <Dropdown placement="top-end">
                <div slot="trigger">
                  <Button variant="outline" color="red">Top End</Button>
                </div>
                <div slot="menu">
                  <div class="px-4 py-2 text-sm text-gray-700">Top end positioned</div>
                </div>
              </Dropdown>
            </div>
          </div>
        </div>
      </div>
    </Card>

    <!-- Tabs Test -->
    <Card class="mb-8">
      <div class="p-6">
        <h2 class="text-2xl font-bold mb-4">Tabs Component</h2>
        
        <!-- Underline Tabs -->
        <div class="mb-8">
          <h3 class="text-lg font-semibold mb-4">Underline Variant</h3>
          <Tabs 
            variant="underline"
            tabs={[
              { 
                id: "overview", 
                label: "Overview", 
                content: "<h4 class='font-semibold mb-2'>Overview Content</h4><p>This is the overview tab content with <strong>HTML markup</strong> support.</p>" 
              },
              { 
                id: "analytics", 
                label: "Analytics", 
                content: "<h4 class='font-semibold mb-2'>Analytics Data</h4><p>Analytics content showing metrics and charts would go here.</p>" 
              },
              { 
                id: "settings", 
                label: "Settings", 
                content: "<h4 class='font-semibold mb-2'>Settings Panel</h4><p>Configuration options and preferences.</p>" 
              },
              { 
                id: "disabled", 
                label: "Disabled", 
                content: "This tab is disabled",
                disabled: true 
              }
            ]}
            defaultTab="overview"
          />
        </div>

        <!-- Pills Tabs -->
        <div class="mb-8">
          <h3 class="text-lg font-semibold mb-4">Pills Variant</h3>
          <Tabs 
            variant="pills"
            tabs={[
              { 
                id: "home", 
                label: "Home", 
                content: "<div class='p-4 bg-blue-50 rounded'>Home tab content with styling</div>" 
              },
              { 
                id: "projects", 
                label: "Projects", 
                content: "<div class='p-4 bg-green-50 rounded'>Projects list and management</div>" 
              },
              { 
                id: "team", 
                label: "Team", 
                content: "<div class='p-4 bg-purple-50 rounded'>Team members and collaboration</div>" 
              }
            ]}
            defaultTab="home"
          />
        </div>

        <!-- Enclosed Tabs -->
        <div>
          <h3 class="text-lg font-semibold mb-4">Enclosed Variant</h3>
          <Tabs 
            variant="enclosed"
            tabs={[
              { 
                id: "dashboard", 
                label: "Dashboard", 
                content: "<div class='p-6 border border-t-0 border-gray-300 bg-white'><h4 class='font-semibold'>Dashboard</h4><p>Main dashboard view</p></div>" 
              },
              { 
                id: "reports", 
                label: "Reports", 
                content: "<div class='p-6 border border-t-0 border-gray-300 bg-white'><h4 class='font-semibold'>Reports</h4><p>Detailed reports and analytics</p></div>" 
              }
            ]}
            defaultTab="dashboard"
          />
        </div>
      </div>
    </Card>

    <!-- Tooltip Test -->
    <Card class="mb-8">
      <div class="p-6">
        <h2 class="text-2xl font-bold mb-4">Tooltip Component</h2>
        
        <div class="grid grid-cols-2 gap-8">
          <!-- Position Tests -->
          <div>
            <h3 class="text-lg font-semibold mb-4">Different Positions</h3>
            <div class="space-y-4 text-center">
              <div>
                <Tooltip content="This tooltip appears on top" position="top">
                  <Button variant="outline" color="blue">Top Tooltip</Button>
                </Tooltip>
              </div>
              
              <div class="flex justify-between">
                <Tooltip content="Left positioned tooltip" position="left">
                  <Button variant="outline" color="green">Left</Button>
                </Tooltip>
                
                <Tooltip content="Right positioned tooltip" position="right">
                  <Button variant="outline" color="purple">Right</Button>
                </Tooltip>
              </div>
              
              <div>
                <Tooltip content="This tooltip appears at the bottom" position="bottom">
                  <Button variant="outline" color="red">Bottom Tooltip</Button>
                </Tooltip>
              </div>
            </div>
          </div>

          <!-- Features Tests -->
          <div>
            <h3 class="text-lg font-semibold mb-4">Tooltip Features</h3>
            <div class="space-y-4">
              <div>
                <Tooltip content="No arrow tooltip" position="top" showArrow={false}>
                  <Button variant="soft" color="neutral">No Arrow</Button>
                </Tooltip>
              </div>
              
              <div>
                <Tooltip content="Delayed tooltip (500ms)" position="right" delay={500}>
                  <Button variant="soft" color="yellow">Delayed</Button>
                </Tooltip>
              </div>
              
              <div>
                <Tooltip content="This is a much longer tooltip text that demonstrates how the component handles longer content" position="bottom">
                  <Button variant="soft" color="blue">Long Content</Button>
                </Tooltip>
              </div>
            </div>
          </div>
        </div>
      </div>
    </Card>

    <!-- Interactive Test -->
    <Card class="mb-8">
      <div class="p-6">
        <h2 class="text-2xl font-bold mb-4">Interactive Test</h2>
        <div x-data="{ notifications: 0, selectedTab: 'overview' }">
          <p class="mb-4">Notifications: <span x-text="notifications" class="font-bold text-blue-600"></span></p>
          
          <div class="flex gap-4 mb-4">
            <Dropdown>
              <div slot="trigger">
                <Button variant="solid" color="green" x-on:click="notifications++">Add Notification</Button>
              </div>
              <div slot="menu">
                <button x-on:click="notifications++" class="block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Info</button>
                <button x-on:click="notifications += 2" class="block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Warning</button>
                <button x-on:click="notifications += 3" class="block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Error</button>
              </div>
            </Dropdown>

            <Tooltip content="Reset notification counter" position="top">
              <Button variant="outline" color="red" x-on:click="notifications = 0">Reset</Button>
            </Tooltip>
          </div>
        </div>
      </div>
    </Card>

    <!-- Status Summary -->
    <Card>
      <div class="p-6">
        <h2 class="text-2xl font-bold mb-4">Test Results</h2>
        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
          <div class="text-center p-4 bg-green-50 rounded-lg">
            <Badge color="green" class="mb-2">✓ Dropdown</Badge>
            <p class="text-sm">Click outside, positioning working</p>
          </div>
          <div class="text-center p-4 bg-green-50 rounded-lg">
            <Badge color="green" class="mb-2">✓ Tabs</Badge>
            <p class="text-sm">All variants, keyboard nav</p>
          </div>
          <div class="text-center p-4 bg-green-50 rounded-lg">
            <Badge color="green" class="mb-2">✓ Tooltip</Badge>
            <p class="text-sm">Hover, positioning, delays</p>
          </div>
        </div>
      </div>
    </Card>
  </main>
</Layout>
---
import SiteLayout from '@/layouts/SiteLayout.astro';
import { getEntry } from 'astro:content';

// UI Components for better styling
import Badge from '@/components/ui/feedback/Badge.astro';
import Button from '@/components/ui/forms/Button.astro';
import {
    Card,
    CardHeader,
    CardContent,
    CardFooter,
} from '@/components/ui/display/card';
import Text from '@/components/ui/display/Text.astro';
import { Column, Row, Section, Page } from '@/components/ui/layout';

// Component showcase imports
import Calendar from '@/components/ui/display/Calendar.astro';
import Tabs from '@/components/ui/navigation/tabs/Tabs.astro';
import TabsList from '@/components/ui/navigation/tabs/TabsList.astro';
import TabsTrigger from '@/components/ui/navigation/tabs/TabsTrigger.astro';
import TabsContent from '@/components/ui/navigation/tabs/TabsContent.astro';
import VideoPlayer from '@/components/ui/display/VideoPlayer.astro';
import {
    Accordion,
    AccordionItem,
    AccordionTrigger,
    AccordionContent,
} from '@/components/ui/display/accordion';
import {
    RadioGroup,
    RadioGroupItem,
    RadioGroupLabel,
} from '@/components/ui/forms/radiogroup';
import {
    Command,
    CommandFooter,
    CommandGroups,
    CommandItems,
    CommandShortcut,
    CommandInput,
    CommandTrigger,
} from '@/components/ui/overlay/command';
import MenuContainer from '@/components/ui/overlay/menu/MenuContainer.astro';
import Image from '@/components/ui/display/Image.astro';
import Input from '@/components/ui/forms/Input.astro';

// Import hero image for card demo
import heroImage from '@/assets/hero-image.png';

// Import GitHub icon
import githubIconUrl from '@/assets/github-icon-white.svg?url';

// Import essential styles
const homeContent = await getEntry('pages', 'home');
const pageData = JSON.stringify(homeContent?.data || []);

const commandItems = {
    suggestions: [
        {
            title: 'Calendar',
            value: 'calendar',
            icon: '<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M8 2v4m8-4v4M3 10h18M5 4h14a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2z"/></svg>',
            show: true,
            shortcut: '⌘C',
        },
        {
            title: 'Search Emoji',
            value: 'emoji',
            icon: '<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><path d="M8 14s1.5 2 4 2 4-2 4-2"/><path d="M9 9h.01M15 9h.01"/></svg>',
            show: true,
            shortcut: '⌘E',
        },
        {
            title: 'Calculator',
            value: 'calculator',
            icon: '<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="16" height="20" x="4" y="2" rx="2"/><line x1="8" x2="16" y1="6" y2="6"/><line x1="16" x2="16" y1="14" y2="18"/><path d="m9 10-1 4h1.5l.5-2h1l.5 2H13l-1-4zm3 0h1v4h-1v-4z"/></svg>',
            show: true,
            shortcut: '⌘Q',
        },
    ],
    settings: [
        {
            title: 'Profile',
            value: 'profile',
            icon: '<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>',
            shortcut: '⌘P',
            show: true,
        },
        {
            title: 'Billing',
            value: 'billing',
            icon: '<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="20" height="14" x="2" y="5" rx="2"/><line x1="2" x2="22" y1="10" y2="10"/></svg>',
            shortcut: '⌘B',
        },
        {
            title: 'Settings',
            value: 'settings',
            icon: '<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"/><circle cx="12" cy="12" r="3"/></svg>',
            shortcut: '⌘S',
            show: true,
        },
    ],
};

const commandItemsJson = JSON.stringify(commandItems);
---

<SiteLayout>
    <Page class="min-h-screen" x-data={pageData}>
        <!-- Hero Section -->
        <Section
            class="text-center py-4 px-4 bg-gradient-to-br from-muted/30 via-background to-muted/10 relative overflow-hidden min-h-[60vh] flex flex-col justify-center items-center gap-6"
        >
            <Text
                variant="hero-title"
                class="relative z-10 drop-shadow-sm tracking-tight"
            >
                <span class="relative group">
                    Basis UI
                    <span
                        class="absolute bottom-[-8px] left-[-5%] w-[110%] h-[5px] bg-primary rounded-full origin-left scale-x-0 opacity-0 group-hover:scale-x-100 group-hover:opacity-100 transition-all duration-700 ease-out"
                    ></span>
                </span>
            </Text>
            <Text
                variant="hero-description"
                class="max-w-2xl mx-auto relative z-10"
            >
                Build on Fundamentals - A methodology for modern web development
                using basic tools and clear boundaries
            </Text>
            <Row class="flex justify-center gap-2 flex-wrap">
                <Badge size="sm" variant="secondary">Astro</Badge>
                <Badge size="sm" variant="secondary">Alpine</Badge>
                <Badge size="sm" variant="secondary">Supabase</Badge>
            </Row>
            <Row class="flex justify-center gap-4">
                <Button href="/docs" size="lg"> Get Started </Button>
                <Button href="/components" size="lg" variant="ghost"
                    >Components</Button
                >
            </Row>
        </Section>

        <!-- Component Showcase Section -->
        <Section class="mx-auto py-16 px-4 bg-muted/30">
            <div class="text-center mb-12">
                <Text variant="section-title" class="mb-4"
                    >Component Showcase</Text
                >
                <Text
                    variant="body"
                    class="text-muted-foreground max-w-2xl mx-auto"
                >
                    Explore our comprehensive UI component library built for
                    modern web development
                </Text>
            </div>

            <!-- 4+4+6 Column Bento Layout -->
            <div class="grid grid-cols-4 md:grid-cols-14 gap-4 max-w-7xl mx-auto">
                
                <!-- Column 1 (4 cols) -->
                <div class="col-span-4 space-y-4">
                    <!-- Login Card -->
                    <Card class="p-6 bg-white dark:bg-card border shadow-sm hover:shadow-md transition-all duration-300">
                        <CardHeader class="pb-4">
                            <Text variant="body" class="font-semibold text-lg text-foreground">Sign in to your account</Text>
                            <Text variant="body" class="text-sm text-muted-foreground">Welcome back! Please enter your details.</Text>
                        </CardHeader>
                        <CardContent class="space-y-4">
                            <div class="space-y-2">
                                <label class="text-sm font-medium text-foreground" for="email">Email</label>
                                <Input type="email" id="email" placeholder="Enter your email" class="w-full" />
                            </div>
                            <div class="space-y-2">
                                <label class="text-sm font-medium text-foreground" for="password">Password</label>
                                <Input type="password" id="password" placeholder="Enter your password" class="w-full" />
                            </div>
                            <div class="flex items-center justify-between">
                                <label class="flex items-center space-x-2 text-sm">
                                    <input type="checkbox" class="rounded border-input" />
                                    <span class="text-muted-foreground">Remember me</span>
                                </label>
                                <a href="#" class="text-sm text-primary hover:underline">Forgot password?</a>
                            </div>
                        </CardContent>
                        <CardFooter class="pt-4">
                            <Button class="w-full">Sign in</Button>
                        </CardFooter>
                    </Card>

                    <!-- FAQ Accordion -->
                    <Card class="p-6 bg-white dark:bg-card border shadow-sm hover:shadow-md transition-all duration-300">
                        <CardHeader class="pb-4">
                            <Text variant="body" class="font-semibold text-lg text-foreground">Frequently Asked Questions</Text>
                            <Text variant="body" class="text-sm text-muted-foreground">Find answers to common questions</Text>
                        </CardHeader>
                        <CardContent>
                            <Accordion maxWidth="full" centered={false}>
                                <AccordionItem>
                                    <AccordionTrigger>How do I reset my password?</AccordionTrigger>
                                    <AccordionContent>
                                        Click "Forgot password?" on the login page and follow the instructions sent to your email.
                                    </AccordionContent>
                                </AccordionItem>
                                <AccordionItem>
                                    <AccordionTrigger>What payment methods do you accept?</AccordionTrigger>
                                    <AccordionContent>
                                        We accept all major credit cards, PayPal, and bank transfers for enterprise plans.
                                    </AccordionContent>
                                </AccordionItem>
                                <AccordionItem>
                                    <AccordionTrigger>Can I cancel my subscription anytime?</AccordionTrigger>
                                    <AccordionContent>
                                        Yes, you can cancel your subscription at any time from your account settings. No questions asked.
                                    </AccordionContent>
                                </AccordionItem>
                            </Accordion>
                        </CardContent>
                    </Card>
                </div>

                <!-- Column 2 (4 cols) -->
                <div class="col-span-4 space-y-4">
                    <!-- Command Palette -->
                    <div
                        x-data={`{
                                    commandSearch: '',
                                    commandActiveIndex: 0,
                                    commandItems: ${commandItemsJson}
                                }`}
                        class="p-6 bg-white dark:bg-card border rounded-lg shadow-sm hover:shadow-md transition-all duration-300"
                    >
                        <div class="mb-4">
                            <Text variant="body" class="font-semibold text-lg text-foreground mb-1">Quick Actions</Text>
                            <Text variant="body" class="text-sm text-muted-foreground">Type to search for commands and shortcuts</Text>
                        </div>
                        <MenuContainer
                            items={commandItems}
                            searchEnabled={true}
                            keyboardNav={false}
                            searchModel="commandSearch"
                            activeModel="commandActiveIndex"
                            itemsModel="commandItems"
                            onSelect="alert('Selected: ' + item.title)"
                            variant="default"
                            size="md"
                            class="w-full"
                        >
                            <CommandInput
                                slot="input"
                                placeholder="Type a command or search..."
                            />
                            <CommandGroups
                                x-for="[categoryName, categoryItems] in Object.entries(filteredItems)"
                                x-key="categoryName"
                                x-text="categoryName.charAt(0).toUpperCase() + categoryName.slice(1)"
                                showDivider={true}
                            >
                                <CommandItems
                                    x-for="item in categoryItems"
                                    x-key="item.value"
                                >
                                    <div
                                        slot="icon"
                                        class="mr-2 h-4 w-4 shrink-0"
                                        x-html="item.icon"
                                    >
                                    </div>
                                    <span x-text="item.title"></span>
                                    <CommandShortcut
                                        slot="shortcut"
                                        x-text="item.shortcut"
                                    />
                                </CommandItems>
                            </CommandGroups>
                            <CommandFooter slot="footer" />
                        </MenuContainer>
                    </div>

                    <!-- Dashboard Tabs -->
                    <Card class="p-6 bg-white dark:bg-card border shadow-sm hover:shadow-md transition-all duration-300">
                        <CardHeader class="pb-4">
                            <Text variant="body" class="font-semibold text-lg text-foreground">Dashboard</Text>
                            <Text variant="body" class="text-sm text-muted-foreground">Monitor your application performance</Text>
                        </CardHeader>
                        <CardContent>
                            <Tabs defaultValue="overview">
                                <TabsList slot="list" variant="pills" class="mb-4">
                                    <TabsTrigger value="overview">Overview</TabsTrigger>
                                    <TabsTrigger value="analytics">Analytics</TabsTrigger>
                                    <TabsTrigger value="settings">Settings</TabsTrigger>
                                </TabsList>
                                <TabsContent value="overview" preview class="h-32">
                                    <div class="flex items-center justify-between">
                                        <div>
                                            <p class="text-2xl font-bold">2,350</p>
                                            <p class="text-sm text-muted-foreground">Active Users</p>
                                        </div>
                                        <div class="text-green-500">
                                            <span class="text-sm">+12.5%</span>
                                        </div>
                                    </div>
                                </TabsContent>
                                <TabsContent value="analytics" preview class="h-32">
                                    <div class="space-y-2">
                                        <div class="flex justify-between">
                                            <span class="text-sm">Page Views</span>
                                            <span class="text-sm font-medium">45,231</span>
                                        </div>
                                        <div class="flex justify-between">
                                            <span class="text-sm">Bounce Rate</span>
                                            <span class="text-sm font-medium">23.1%</span>
                                        </div>
                                    </div>
                                </TabsContent>
                                <TabsContent value="settings" preview class="h-32">
                                    <div class="space-y-2">
                                        <div class="flex items-center justify-between">
                                            <span class="text-sm">Notifications</span>
                                            <input type="checkbox" checked class="rounded" />
                                        </div>
                                        <div class="flex items-center justify-between">
                                            <span class="text-sm">Dark Mode</span>
                                            <input type="checkbox" class="rounded" />
                                        </div>
                                    </div>
                                </TabsContent>
                            </Tabs>
                        </CardContent>
                    </Card>
                </div>

                <!-- Column 3 (6 cols) -->
                <div class="col-span-4 md:col-span-6 space-y-4">
                    <!-- User Data Table -->
                    <Card class="p-6 bg-white dark:bg-card border shadow-sm hover:shadow-md transition-all duration-300">
                        <CardHeader class="pb-4">
                            <Text variant="body" class="font-semibold text-lg text-foreground">Team Members</Text>
                            <Text variant="body" class="text-sm text-muted-foreground">Manage your team and permissions</Text>
                        </CardHeader>
                        <CardContent>
                            <div class="overflow-x-auto">
                                <table class="w-full text-sm">
                                    <thead>
                                        <tr class="border-b">
                                            <th class="text-left py-2 font-medium">Name</th>
                                            <th class="text-left py-2 font-medium">Email</th>
                                            <th class="text-left py-2 font-medium">Role</th>
                                            <th class="text-left py-2 font-medium">Status</th>
                                        </tr>
                                    </thead>
                                    <tbody class="divide-y">
                                        <tr>
                                            <td class="py-2 flex items-center space-x-2">
                                                <div class="w-6 h-6 bg-blue-500 rounded-full flex items-center justify-center text-white text-xs">JS</div>
                                                <span>John Smith</span>
                                            </td>
                                            <td class="py-2 text-muted-foreground">john@company.com</td>
                                            <td class="py-2">Admin</td>
                                            <td class="py-2"><Badge variant="success" size="sm">Active</Badge></td>
                                        </tr>
                                        <tr>
                                            <td class="py-2 flex items-center space-x-2">
                                                <div class="w-6 h-6 bg-green-500 rounded-full flex items-center justify-center text-white text-xs">SM</div>
                                                <span>Sarah Miller</span>
                                            </td>
                                            <td class="py-2 text-muted-foreground">sarah@company.com</td>
                                            <td class="py-2">Editor</td>
                                            <td class="py-2"><Badge variant="success" size="sm">Active</Badge></td>
                                        </tr>
                                        <tr>
                                            <td class="py-2 flex items-center space-x-2">
                                                <div class="w-6 h-6 bg-purple-500 rounded-full flex items-center justify-center text-white text-xs">MJ</div>
                                                <span>Mike Johnson</span>
                                            </td>
                                            <td class="py-2 text-muted-foreground">mike@company.com</td>
                                            <td class="py-2">Viewer</td>
                                            <td class="py-2"><Badge variant="secondary" size="sm">Pending</Badge></td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </CardContent>
                    </Card>

                    <!-- Calendar and Pricing Plans Row -->
                    <div class="grid grid-cols-2 gap-4">
                        <!-- Event Calendar -->
                        <div class="bg-white dark:bg-card border rounded-lg p-4 shadow-sm hover:shadow-md transition-all duration-300">
                            <div class="mb-3">
                                <Text variant="body" class="font-semibold text-foreground mb-1">Upcoming Events</Text>
                                <Text variant="body" class="text-xs text-muted-foreground">Schedule and manage meetings</Text>
                            </div>
                            <div class="scale-90 origin-top-left">
                                <Calendar size="sm" numberOfMonths={1} mode="range" />
                            </div>
                            <div class="mt-2 space-y-1">
                                <div class="text-xs flex justify-between">
                                    <span>Team Meeting</span>
                                    <span class="text-muted-foreground">2:00 PM</span>
                                </div>
                                <div class="text-xs flex justify-between">
                                    <span>Client Call</span>
                                    <span class="text-muted-foreground">4:30 PM</span>
                                </div>
                            </div>
                        </div>

                        <!-- Pricing Plans -->
                        <Card class="p-4 bg-white dark:bg-card border shadow-sm hover:shadow-md transition-all duration-300">
                            <CardHeader class="pb-3">
                                <Text variant="body" class="font-semibold text-foreground">Choose Your Plan</Text>
                                <Text variant="body" class="text-xs text-muted-foreground">Select the perfect plan for your needs</Text>
                            </CardHeader>
                            <CardContent>
                                <RadioGroup
                                    name="pricing"
                                    selectedOption="pro"
                                    orientation="vertical"
                                >
                                    <RadioGroupItem value="starter">
                                        <RadioGroupLabel>
                                            <div class="flex justify-between w-full">
                                                <div>
                                                    <p class="font-medium">Starter</p>
                                                    <p class="text-xs text-muted-foreground">Perfect for individuals</p>
                                                </div>
                                                <span class="font-semibold">$9/mo</span>
                                            </div>
                                        </RadioGroupLabel>
                                    </RadioGroupItem>
                                    <RadioGroupItem value="pro">
                                        <RadioGroupLabel>
                                            <div class="flex justify-between w-full">
                                                <div>
                                                    <p class="font-medium">Pro</p>
                                                    <p class="text-xs text-muted-foreground">Best for small teams</p>
                                                </div>
                                                <span class="font-semibold">$29/mo</span>
                                            </div>
                                        </RadioGroupLabel>
                                    </RadioGroupItem>
                                    <RadioGroupItem value="enterprise">
                                        <RadioGroupLabel>
                                            <div class="flex justify-between w-full">
                                                <div>
                                                    <p class="font-medium">Enterprise</p>
                                                    <p class="text-xs text-muted-foreground">For large organizations</p>
                                                </div>
                                                <span class="font-semibold">$99/mo</span>
                                            </div>
                                        </RadioGroupLabel>
                                    </RadioGroupItem>
                                </RadioGroup>
                            </CardContent>
                        </Card>
                    </div>

                    <!-- Video Player -->
                    <div class="bg-white dark:bg-card border rounded-lg p-4 shadow-sm hover:shadow-md transition-all duration-300">
                        <div class="mb-3">
                            <Text variant="body" class="font-semibold text-foreground mb-1">Product Demo</Text>
                            <Text variant="body" class="text-xs text-muted-foreground">Watch how our platform works</Text>
                        </div>
                        <div class="aspect-video">
                            <VideoPlayer youtubeId="jfKfPfyJRdk" shape="rounded" />
                        </div>
                    </div>
                </div>
            </div>
            </div>
        </Section>
    </Page>
</SiteLayout>

<style>
  /* Enhanced masonry grid with better responsive behavior */
  .masonry-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 1rem;
    grid-auto-rows: min-content;
    align-items: start;
  }
  
  @media (min-width: 768px) {
    .masonry-grid {
      grid-template-columns: repeat(4, 1fr);
      gap: 1.5rem;
    }
  }
  
  @media (min-width: 1024px) {
    .masonry-grid {
      grid-template-columns: repeat(6, 1fr);
      gap: 1rem;
    }
  }
  
  /* Ensure tiles have proper minimum heights and hover effects */
  .masonry-tile {
    transition: all 300ms cubic-bezier(0.4, 0, 0.2, 1);
    will-change: transform, box-shadow;
  }
  
  .masonry-tile:hover {
    transform: translateY(-2px);
  }
  
  /* Component-specific styling adjustments */
  .component-tile-calendar .calendar-container {
    transform: scale(0.95);
    transform-origin: top left;
  }
  
  .component-tile-video {
    overflow: hidden;
  }
  
  .component-tile-command {
    max-height: 400px;
    overflow: hidden;
  }
</style>

---
import Layout from '../../layouts/Layout.astro';
import Card from '../../components/pine/Card.astro';
import Button from '../../components/pine/Button.astro';
import Badge from '../../components/pine/Badge.astro';
import TextInput from '../../components/pine/TextInput.astro';
---

<Layout title="TextInput Component Test">
  <main class="container mx-auto px-4 py-8 max-w-4xl">
    <!-- Header -->
    <div class="text-center mb-8">
      <h1 class="text-3xl font-bold mb-4">TextInput Component Test</h1>
      <div class="flex justify-center gap-2 mb-6">
        <Button href="/test" variant="outline" color="neutral">← Back to Test Suite</Button>
        <Button href="/test/all" variant="ghost" color="neutral">View All</Button>
      </div>
    </div>

    <!-- Input Types Test -->
    <Card class="mb-8">
      <div class="p-6">
        <h2 class="text-2xl font-bold mb-4">Input Types</h2>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
          <div>
            <h3 class="text-lg font-semibold mb-4">Basic Text Types</h3>
            <div class="space-y-4">
              <TextInput 
                type="text"
                label="Text Input"
                placeholder="Enter any text"
                description="Standard text input for general use"
                id="text-basic"
              />
              
              <TextInput 
                type="email"
                label="Email Address"
                placeholder="user@example.com"
                description="Email input with built-in validation"
                id="email-basic"
              />
              
              <TextInput 
                type="password"
                label="Password"
                placeholder="Enter your password"
                description="Password input with hidden characters"
                id="password-basic"
              />
              
              <TextInput 
                type="url"
                label="Website URL"
                placeholder="https://example.com"
                description="URL input with validation"
                id="url-basic"
              />
            </div>
          </div>
          
          <div>
            <h3 class="text-lg font-semibold mb-4">Specialized Types</h3>
            <div class="space-y-4">
              <TextInput 
                type="number"
                label="Age"
                placeholder="25"
                description="Numeric input for numbers"
                id="number-basic"
              />
              
              <TextInput 
                type="tel"
                label="Phone Number"
                placeholder="+1 (555) 123-4567"
                description="Telephone number input"
                id="tel-basic"
              />
              
              <TextInput 
                type="search"
                label="Search"
                placeholder="Search for anything..."
                description="Search input with optimized keyboard"
                id="search-basic"
              />
            </div>
          </div>
        </div>
      </div>
    </Card>

    <!-- Size Variants Test -->
    <Card class="mb-8">
      <div class="p-6">
        <h2 class="text-2xl font-bold mb-4">Size Variants</h2>
        <div class="space-y-6">
          <div>
            <h3 class="text-lg font-semibold mb-3">Small Size</h3>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
              <TextInput 
                size="sm"
                label="Small Input"
                placeholder="Small placeholder"
                description="Compact size for tight spaces"
                id="size-sm-1"
              />
              <TextInput 
                size="sm"
                type="email"
                label="Small Email"
                placeholder="email@example.com"
                id="size-sm-2"
              />
            </div>
          </div>
          
          <div>
            <h3 class="text-lg font-semibold mb-3">Medium Size (Default)</h3>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
              <TextInput 
                size="md"
                label="Medium Input"
                placeholder="Medium placeholder"
                description="Standard size for most use cases"
                id="size-md-1"
              />
              <TextInput 
                size="md"
                type="password"
                label="Medium Password"
                placeholder="Enter password"
                id="size-md-2"
              />
            </div>
          </div>
          
          <div>
            <h3 class="text-lg font-semibold mb-3">Large Size</h3>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
              <TextInput 
                size="lg"
                label="Large Input"
                placeholder="Large placeholder"
                description="Larger size for better accessibility"
                id="size-lg-1"
              />
              <TextInput 
                size="lg"
                type="tel"
                label="Large Phone"
                placeholder="+1 (555) 123-4567"
                id="size-lg-2"
              />
            </div>
          </div>
        </div>
      </div>
    </Card>

    <!-- Style Variants Test -->
    <Card class="mb-8">
      <div class="p-6">
        <h2 class="text-2xl font-bold mb-4">Style Variants</h2>
        <div class="space-y-6">
          <div>
            <h3 class="text-lg font-semibold mb-3">Default Variant</h3>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
              <TextInput 
                variant="default"
                label="Default Style"
                placeholder="Standard border style"
                description="Classic input with border"
                id="variant-default-1"
              />
              <TextInput 
                variant="default"
                label="With Value"
                value="Pre-filled value"
                description="Default style with initial value"
                id="variant-default-2"
              />
            </div>
          </div>
          
          <div>
            <h3 class="text-lg font-semibold mb-3">Filled Variant</h3>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
              <TextInput 
                variant="filled"
                label="Filled Style"
                placeholder="Background filled style"
                description="Input with gray background"
                id="variant-filled-1"
              />
              <TextInput 
                variant="filled"
                label="Filled with Value"
                value="Filled background"
                description="Filled style with initial value"
                id="variant-filled-2"
              />
            </div>
          </div>
          
          <div>
            <h3 class="text-lg font-semibold mb-3">Underlined Variant</h3>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
              <TextInput 
                variant="underlined"
                label="Underlined Style"
                placeholder="Bottom border only"
                description="Minimal style with bottom border"
                id="variant-underlined-1"
              />
              <TextInput 
                variant="underlined"
                label="Underlined with Value"
                value="Minimal underline"
                description="Underlined style with initial value"
                id="variant-underlined-2"
              />
            </div>
          </div>
        </div>
      </div>
    </Card>

    <!-- States Test -->
    <Card class="mb-8">
      <div class="p-6">
        <h2 class="text-2xl font-bold mb-4">Input States</h2>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
          <div>
            <h3 class="text-lg font-semibold mb-4">Standard States</h3>
            <div class="space-y-4">
              <TextInput 
                label="Normal State"
                placeholder="Normal input"
                description="Standard input state"
                id="state-normal"
              />
              
              <TextInput 
                label="Required Field"
                placeholder="This field is required"
                description="Field marked as required"
                required={true}
                id="state-required"
              />
              
              <TextInput 
                label="Disabled Input"
                placeholder="Cannot be edited"
                description="Input is disabled"
                disabled={true}
                value="Disabled value"
                id="state-disabled"
              />
              
              <TextInput 
                label="Read-only Input"
                placeholder="Cannot be changed"
                description="Input is read-only"
                readonly={true}
                value="Read-only value"
                id="state-readonly"
              />
            </div>
          </div>
          
          <div>
            <h3 class="text-lg font-semibold mb-4">Error States</h3>
            <div class="space-y-4">
              <TextInput 
                label="Email with Error"
                placeholder="Enter valid email"
                error="Please enter a valid email address"
                value="invalid-email"
                type="email"
                id="state-error-1"
              />
              
              <TextInput 
                label="Password with Error"
                placeholder="Enter password"
                error="Password must be at least 8 characters"
                value="short"
                type="password"
                id="state-error-2"
              />
              
              <TextInput 
                label="Required Field Error"
                placeholder="This field is required"
                error="This field cannot be empty"
                required={true}
                id="state-error-3"
              />
            </div>
          </div>
        </div>
      </div>
    </Card>

    <!-- Interactive Form Example -->
    <Card class="mb-8">
      <div class="p-6">
        <h2 class="text-2xl font-bold mb-4">Interactive Form Example</h2>
        <form x-data="{ 
          formData: {
            firstName: '',
            lastName: '',
            email: '',
            phone: '',
            website: '',
            age: '',
            password: '',
            confirmPassword: ''
          },
          
          errors: {},
          
          validateField(field, value) {
            this.errors[field] = '';
            
            switch(field) {
              case 'email':
                if (value && !value.includes('@')) {
                  this.errors[field] = 'Please enter a valid email address';
                }
                break;
              case 'password':
                if (value && value.length < 8) {
                  this.errors[field] = 'Password must be at least 8 characters';
                }
                break;
              case 'confirmPassword':
                if (value && value !== this.formData.password) {
                  this.errors[field] = 'Passwords do not match';
                }
                break;
              case 'age':
                if (value && (parseInt(value) < 13 || parseInt(value) > 120)) {
                  this.errors[field] = 'Age must be between 13 and 120';
                }
                break;
            }
          },
          
          submitForm() {
            // Validate all fields
            Object.keys(this.formData).forEach(field => {
              this.validateField(field, this.formData[field]);
            });
            
            const hasErrors = Object.values(this.errors).some(error => error);
            
            if (!hasErrors) {
              alert('Form submitted successfully!\\n\\n' + JSON.stringify(this.formData, null, 2));
            } else {
              alert('Please fix the errors in the form before submitting.');
            }
          }
        }" @submit.prevent="submitForm()">
          <div class="space-y-6">
            <!-- Personal Information -->
            <div>
              <h3 class="text-lg font-semibold mb-4">Personal Information</h3>
              <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <TextInput 
                  label="First Name"
                  placeholder="Enter your first name"
                  required={true}
                  x-model="formData.firstName"
                  id="form-firstname"
                />
                
                <TextInput 
                  label="Last Name"
                  placeholder="Enter your last name"
                  required={true}
                  x-model="formData.lastName"
                  id="form-lastname"
                />
                
                <TextInput 
                  type="email"
                  label="Email Address"
                  placeholder="your.email@example.com"
                  required={true}
                  x-model="formData.email"
                  @input="validateField('email', $event.target.value)"
                  :error="errors.email"
                  id="form-email"
                />
                
                <TextInput 
                  type="tel"
                  label="Phone Number"
                  placeholder="+1 (555) 123-4567"
                  x-model="formData.phone"
                  id="form-phone"
                />
              </div>
            </div>
            
            <!-- Additional Information -->
            <div>
              <h3 class="text-lg font-semibold mb-4">Additional Information</h3>
              <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <TextInput 
                  type="url"
                  label="Website"
                  placeholder="https://yourwebsite.com"
                  x-model="formData.website"
                  description="Optional: Your personal or company website"
                  id="form-website"
                />
                
                <TextInput 
                  type="number"
                  label="Age"
                  placeholder="25"
                  x-model="formData.age"
                  @input="validateField('age', $event.target.value)"
                  :error="errors.age"
                  description="Must be between 13 and 120"
                  id="form-age"
                />
              </div>
            </div>
            
            <!-- Security -->
            <div>
              <h3 class="text-lg font-semibold mb-4">Security</h3>
              <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <TextInput 
                  type="password"
                  label="Password"
                  placeholder="Create a password"
                  required={true}
                  x-model="formData.password"
                  @input="validateField('password', $event.target.value)"
                  :error="errors.password"
                  description="At least 8 characters"
                  id="form-password"
                />
                
                <TextInput 
                  type="password"
                  label="Confirm Password"
                  placeholder="Confirm your password"
                  required={true}
                  x-model="formData.confirmPassword"
                  @input="validateField('confirmPassword', $event.target.value)"
                  :error="errors.confirmPassword"
                  id="form-confirm-password"
                />
              </div>
            </div>
            
            <!-- Form Actions -->
            <div class="flex gap-4 pt-6 border-t">
              <Button type="submit" variant="solid" color="blue">
                Submit Form
              </Button>
              <Button type="button" variant="outline" color="neutral" @click="formData = {}; errors = {};">
                Clear Form
              </Button>
            </div>
            
            <!-- Form Data Preview -->
            <div class="mt-6 p-4 bg-gray-50 rounded-lg">
              <h4 class="font-semibold mb-2">Form Data Preview:</h4>
              <pre class="text-sm text-gray-600 whitespace-pre-wrap" x-text="JSON.stringify(formData, null, 2)"></pre>
            </div>
          </div>
        </form>
      </div>
    </Card>

    <!-- Custom Styling Examples -->
    <Card class="mb-8">
      <div class="p-6">
        <h2 class="text-2xl font-bold mb-4">Custom Styling Examples</h2>
        <div class="space-y-6">
          <!-- Custom Input Classes -->
          <div>
            <h3 class="text-lg font-semibold mb-3">Custom Input Styling</h3>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
              <TextInput 
                label="Rounded Input"
                placeholder="Custom rounded corners"
                inputClass="rounded-full"
                id="custom-rounded"
              />
              
              <TextInput 
                label="Colored Border"
                placeholder="Custom border color"
                inputClass="border-purple-300 focus:border-purple-500 focus:ring-purple-500"
                id="custom-border"
              />
            </div>
          </div>
          
          <!-- Custom Container Styling -->
          <div>
            <h3 class="text-lg font-semibold mb-3">Custom Container Styling</h3>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
              <TextInput 
                label="Background Highlight"
                placeholder="Custom background"
                class="bg-blue-50 p-4 rounded-lg"
                id="custom-bg"
              />
              
              <TextInput 
                label="Bordered Container"
                placeholder="Custom container"
                class="border-2 border-dashed border-gray-300 p-4 rounded-lg"
                id="custom-container"
              />
            </div>
          </div>
        </div>
      </div>
    </Card>

    <!-- Status Summary -->
    <Card>
      <div class="p-6">
        <h2 class="text-2xl font-bold mb-4">Test Results</h2>
        <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
          <div class="text-center p-4 bg-green-50 rounded-lg">
            <Badge color="green" class="mb-2">✓ Working</Badge>
            <p class="text-sm">All input types working</p>
          </div>
          <div class="text-center p-4 bg-green-50 rounded-lg">
            <Badge color="green" class="mb-2">✓ Working</Badge>
            <p class="text-sm">Size variants working</p>
          </div>
          <div class="text-center p-4 bg-green-50 rounded-lg">
            <Badge color="green" class="mb-2">✓ Working</Badge>
            <p class="text-sm">Style variants working</p>
          </div>
          <div class="text-center p-4 bg-green-50 rounded-lg">
            <Badge color="green" class="mb-2">✓ Working</Badge>
            <p class="text-sm">Error handling working</p>
          </div>
        </div>
      </div>
    </Card>
  </main>
</Layout>
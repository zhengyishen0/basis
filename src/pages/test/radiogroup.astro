---
import Layout from '../../layouts/Layout.astro';
import Card from '../../components/pine/Card.astro';
import Button from '../../components/pine/Button.astro';
import Badge from '../../components/pine/Badge.astro';
import RadioGroup from '../../components/pine/RadioGroup.astro';

// Sample data for testing
const planOptions = [
  { 
    value: "free", 
    title: "Free Plan", 
    description: "Perfect for getting started with basic features" 
  },
  { 
    value: "basic", 
    title: "Basic Plan", 
    description: "Great for small teams and personal projects" 
  },
  { 
    value: "pro", 
    title: "Pro Plan", 
    description: "Best for growing businesses with advanced needs" 
  },
  { 
    value: "enterprise", 
    title: "Enterprise Plan", 
    description: "Complete solution for large organizations" 
  }
];

const paymentOptions = [
  { 
    value: "credit", 
    title: "Credit Card", 
    description: "Visa, Mastercard, American Express" 
  },
  { 
    value: "paypal", 
    title: "PayPal", 
    description: "Pay securely with your PayPal account" 
  },
  { 
    value: "bank", 
    title: "Bank Transfer", 
    description: "Direct transfer from your bank account" 
  }
];

const deliveryOptions = [
  { 
    value: "standard", 
    title: "Standard Delivery", 
    description: "5-7 business days, Free" 
  },
  { 
    value: "express", 
    title: "Express Delivery", 
    description: "2-3 business days, $9.99" 
  },
  { 
    value: "overnight", 
    title: "Overnight Delivery", 
    description: "Next business day, $24.99" 
  }
];

const notificationOptions = [
  { 
    value: "all", 
    title: "All Notifications" 
  },
  { 
    value: "important", 
    title: "Important Only" 
  },
  { 
    value: "none", 
    title: "No Notifications" 
  }
];

const themeOptions = [
  { 
    value: "light", 
    title: "Light Theme", 
    description: "Clean and bright interface" 
  },
  { 
    value: "dark", 
    title: "Dark Theme", 
    description: "Easy on the eyes in low light" 
  },
  { 
    value: "auto", 
    title: "Auto", 
    description: "Matches your system preference" 
  }
];
---

<Layout title="RadioGroup Component Test">
  <main class="container mx-auto px-4 py-8 max-w-4xl">
    <!-- Header -->
    <div class="text-center mb-8">
      <h1 class="text-3xl font-bold mb-4">RadioGroup Component Test</h1>
      <div class="flex justify-center gap-2 mb-6">
        <Button href="/test" variant="outline" color="neutral">← Back to Test Suite</Button>
        <Button href="/test/all" variant="ghost" color="neutral">View All</Button>
      </div>
    </div>

    <!-- Basic RadioGroup Test -->
    <Card class="mb-8">
      <div class="p-6">
        <h2 class="text-2xl font-bold mb-4">Basic RadioGroup Usage</h2>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
          <!-- With Descriptions -->
          <div>
            <h3 class="text-lg font-semibold mb-4">Plan Selection (with descriptions)</h3>
            <RadioGroup 
              name="subscription-plan"
              options={planOptions}
              selectedValue="basic"
            />
          </div>
          
          <!-- Without Descriptions -->
          <div>
            <h3 class="text-lg font-semibold mb-4">Notification Preferences (simple)</h3>
            <RadioGroup 
              name="notifications"
              options={notificationOptions}
              selectedValue="important"
            />
          </div>
        </div>
      </div>
    </Card>

    <!-- Payment and Delivery Example -->
    <Card class="mb-8">
      <div class="p-6">
        <h2 class="text-2xl font-bold mb-4">Payment and Delivery Options</h2>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
          <!-- Payment Methods -->
          <div>
            <h3 class="text-lg font-semibold mb-4">Payment Method</h3>
            <RadioGroup 
              name="payment-method"
              options={paymentOptions}
              selectedValue="credit"
            />
          </div>
          
          <!-- Delivery Options -->
          <div>
            <h3 class="text-lg font-semibold mb-4">Delivery Speed</h3>
            <RadioGroup 
              name="delivery-speed"
              options={deliveryOptions}
              selectedValue="standard"
            />
          </div>
        </div>
      </div>
    </Card>

    <!-- Interactive Demo -->
    <Card class="mb-8">
      <div class="p-6">
        <h2 class="text-2xl font-bold mb-4">Interactive Demo</h2>
        <div x-data="{ 
          selections: {
            theme: 'light',
            plan: 'free',
            payment: '',
            delivery: 'standard'
          },
          
          clearAll() {
            this.selections = {
              theme: '',
              plan: '',
              payment: '',
              delivery: ''
            };
          },
          
          setDefaults() {
            this.selections = {
              theme: 'auto',
              plan: 'pro',
              payment: 'credit',
              delivery: 'express'
            };
          }
        }">
          <div class="space-y-6">
            <div class="flex gap-4 mb-6">
              <Button @click="clearAll()" variant="outline" color="red" size="sm">
                Clear All Selections
              </Button>
              <Button @click="setDefaults()" variant="solid" color="blue" size="sm">
                Set Recommended Options
              </Button>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
              <!-- Theme Selection -->
              <div>
                <h3 class="text-lg font-semibold mb-4">Theme Preference</h3>
                <RadioGroup 
                  name="interactive-theme"
                  options={themeOptions}
                  x-model="selections.theme"
                />
              </div>
              
              <!-- Plan Selection -->
              <div>
                <h3 class="text-lg font-semibold mb-4">Subscription Plan</h3>
                <RadioGroup 
                  name="interactive-plan"
                  options={planOptions}
                  x-model="selections.plan"
                />
              </div>
            </div>
            
            <!-- Selection Summary -->
            <div class="mt-6 p-4 bg-gray-50 rounded-lg">
              <h4 class="font-semibold mb-3">Current Selections:</h4>
              <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm">
                <div>
                  <strong>Theme:</strong> 
                  <Badge variant="soft" color="purple" size="sm" class="ml-2" x-text="selections.theme || 'None'"></Badge>
                </div>
                <div>
                  <strong>Plan:</strong> 
                  <Badge variant="soft" color="blue" size="sm" class="ml-2" x-text="selections.plan || 'None'"></Badge>
                </div>
                <div>
                  <strong>Payment:</strong> 
                  <Badge variant="soft" color="green" size="sm" class="ml-2" x-text="selections.payment || 'None'"></Badge>
                </div>
                <div>
                  <strong>Delivery:</strong> 
                  <Badge variant="soft" color="yellow" size="sm" class="ml-2" x-text="selections.delivery || 'None'"></Badge>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </Card>

    <!-- Form Integration Example -->
    <Card class="mb-8">
      <div class="p-6">
        <h2 class="text-2xl font-bold mb-4">Form Integration Example</h2>
        <form x-data="{ 
          formData: {
            subscriptionPlan: 'basic',
            paymentMethod: '',
            deliveryOption: 'standard',
            themePreference: 'light',
            notifications: 'important'
          },
          
          errors: {},
          
          validateForm() {
            this.errors = {};
            
            if (!this.formData.paymentMethod) {
              this.errors.paymentMethod = 'Please select a payment method';
            }
            
            return Object.keys(this.errors).length === 0;
          },
          
          submitForm() {
            if (this.validateForm()) {
              alert('Order submitted successfully!\\n\\n' + JSON.stringify(this.formData, null, 2));
            } else {
              alert('Please fix the errors in the form before submitting.');
            }
          }
        }" @submit.prevent="submitForm()">
          <div class="space-y-8">
            <h3 class="text-lg font-semibold">Complete Your Order</h3>
            
            <!-- Step 1: Plan Selection -->
            <div class="p-4 border border-gray-200 rounded-lg">
              <h4 class="font-semibold mb-3">Step 1: Choose Your Plan</h4>
              <RadioGroup 
                name="form-plan"
                options={planOptions}
                x-model="formData.subscriptionPlan"
              />
            </div>
            
            <!-- Step 2: Payment Method -->
            <div class="p-4 border border-gray-200 rounded-lg">
              <h4 class="font-semibold mb-3">Step 2: Payment Method <span class="text-red-500">*</span></h4>
              <RadioGroup 
                name="form-payment"
                options={paymentOptions}
                x-model="formData.paymentMethod"
              />
              <p x-show="errors.paymentMethod" class="mt-2 text-xs text-red-500" x-text="errors.paymentMethod"></p>
            </div>
            
            <!-- Step 3: Delivery -->
            <div class="p-4 border border-gray-200 rounded-lg">
              <h4 class="font-semibold mb-3">Step 3: Delivery Options</h4>
              <RadioGroup 
                name="form-delivery"
                options={deliveryOptions}
                x-model="formData.deliveryOption"
              />
            </div>
            
            <!-- Step 4: Preferences -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
              <div class="p-4 border border-gray-200 rounded-lg">
                <h4 class="font-semibold mb-3">Theme Preference</h4>
                <RadioGroup 
                  name="form-theme"
                  options={themeOptions}
                  x-model="formData.themePreference"
                />
              </div>
              
              <div class="p-4 border border-gray-200 rounded-lg">
                <h4 class="font-semibold mb-3">Notifications</h4>
                <RadioGroup 
                  name="form-notifications"
                  options={notificationOptions}
                  x-model="formData.notifications"
                />
              </div>
            </div>
            
            <!-- Order Summary -->
            <div class="p-4 bg-blue-50 rounded-lg">
              <h4 class="font-semibold mb-3">Order Summary</h4>
              <div class="space-y-2 text-sm">
                <div>Plan: <strong x-text="formData.subscriptionPlan || 'Not selected'"></strong></div>
                <div>Payment: <strong x-text="formData.paymentMethod || 'Not selected'"></strong></div>
                <div>Delivery: <strong x-text="formData.deliveryOption || 'Not selected'"></strong></div>
                <div>Theme: <strong x-text="formData.themePreference || 'Not selected'"></strong></div>
                <div>Notifications: <strong x-text="formData.notifications || 'Not selected'"></strong></div>
              </div>
            </div>
            
            <!-- Form Actions -->
            <div class="flex gap-4 pt-6 border-t">
              <Button type="submit" variant="solid" color="blue">
                Complete Order
              </Button>
              <Button type="button" variant="outline" color="neutral" @click="formData = { subscriptionPlan: 'basic', paymentMethod: '', deliveryOption: 'standard', themePreference: 'light', notifications: 'important' }; errors = {};">
                Reset Form
              </Button>
            </div>
          </div>
        </form>
      </div>
    </Card>

    <!-- Custom Styling Examples -->
    <Card class="mb-8">
      <div class="p-6">
        <h2 class="text-2xl font-bold mb-4">Custom Styling Examples</h2>
        <div class="space-y-6">
          <!-- Compact Layout -->
          <div>
            <h3 class="text-lg font-semibold mb-3">Compact Horizontal Layout</h3>
            <div class="p-4 bg-gray-50 rounded-lg">
              <RadioGroup 
                name="compact-notifications"
                options={notificationOptions}
                selectedValue="important"
                class="flex gap-6"
              />
            </div>
          </div>
          
          <!-- Card-style Options -->
          <div>
            <h3 class="text-lg font-semibold mb-3">Card-style Options</h3>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
              <div class="p-4 border-2 border-gray-200 rounded-lg hover:border-blue-300 transition-colors">
                <RadioGroup 
                  name="card-theme-1"
                  options={[{ value: "light", title: "Light Theme", description: "Clean and bright" }]}
                  selectedValue="light"
                />
              </div>
              <div class="p-4 border-2 border-gray-200 rounded-lg hover:border-blue-300 transition-colors">
                <RadioGroup 
                  name="card-theme-2"
                  options={[{ value: "dark", title: "Dark Theme", description: "Easy on the eyes" }]}
                />
              </div>
              <div class="p-4 border-2 border-gray-200 rounded-lg hover:border-blue-300 transition-colors">
                <RadioGroup 
                  name="card-theme-3"
                  options={[{ value: "auto", title: "Auto Theme", description: "System preference" }]}
                />
              </div>
            </div>
          </div>
          
          <!-- Bordered Groups -->
          <div>
            <h3 class="text-lg font-semibold mb-3">Bordered Groups</h3>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
              <div class="border-l-4 border-blue-500 pl-4">
                <h4 class="font-medium mb-3 text-blue-700">Priority Settings</h4>
                <RadioGroup 
                  name="priority-notifications"
                  options={notificationOptions}
                  selectedValue="all"
                />
              </div>
              
              <div class="border-l-4 border-green-500 pl-4">
                <h4 class="font-medium mb-3 text-green-700">Display Settings</h4>
                <RadioGroup 
                  name="display-theme"
                  options={themeOptions}
                  selectedValue="auto"
                />
              </div>
            </div>
          </div>
        </div>
      </div>
    </Card>

    <!-- Status Summary -->
    <Card>
      <div class="p-6">
        <h2 class="text-2xl font-bold mb-4">Test Results</h2>
        <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
          <div class="text-center p-4 bg-green-50 rounded-lg">
            <Badge color="green" class="mb-2">✓ Working</Badge>
            <p class="text-sm">Basic functionality</p>
          </div>
          <div class="text-center p-4 bg-green-50 rounded-lg">
            <Badge color="green" class="mb-2">✓ Working</Badge>
            <p class="text-sm">Alpine.js integration</p>
          </div>
          <div class="text-center p-4 bg-green-50 rounded-lg">
            <Badge color="green" class="mb-2">✓ Working</Badge>
            <p class="text-sm">Form integration</p>
          </div>
          <div class="text-center p-4 bg-green-50 rounded-lg">
            <Badge color="green" class="mb-2">✓ Working</Badge>
            <p class="text-sm">Custom styling</p>
          </div>
        </div>
      </div>
    </Card>
  </main>
</Layout>
---
import Layout from '../../layouts/Layout.astro';
import Card from '../../components/pine/Card.astro';
import Button from '../../components/pine/Button.astro';
import Badge from '../../components/pine/Badge.astro';
import Tooltip from '../../components/pine/Tooltip.astro';
---

<Layout title="Tooltip Component Test">
  <main class="container mx-auto px-4 py-8 max-w-4xl">
    <!-- Header -->
    <div class="text-center mb-8">
      <h1 class="text-3xl font-bold mb-4">Tooltip Component Test</h1>
      <div class="flex justify-center gap-2 mb-6">
        <Button href="/test" variant="outline" color="neutral">← Back to Test Suite</Button>
        <Button href="/test/all" variant="ghost" color="neutral">View All</Button>
      </div>
    </div>

    <!-- Positions Test -->
    <Card class="mb-8">
      <div class="p-6">
        <h2 class="text-2xl font-bold mb-4">Positions</h2>
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
          <div class="text-center">
            <h3 class="text-lg font-semibold mb-4">Top</h3>
            <div class="flex justify-center">
              <Tooltip content="This tooltip appears on top" position="top">
                <Button variant="solid" color="blue">Hover me</Button>
              </Tooltip>
            </div>
          </div>
          
          <div class="text-center">
            <h3 class="text-lg font-semibold mb-4">Right</h3>
            <div class="flex justify-center">
              <Tooltip content="This tooltip appears on the right" position="right">
                <Button variant="solid" color="green">Hover me</Button>
              </Tooltip>
            </div>
          </div>

          <div class="text-center">
            <h3 class="text-lg font-semibold mb-4">Bottom</h3>
            <div class="flex justify-center">
              <Tooltip content="This tooltip appears on bottom" position="bottom">
                <Button variant="solid" color="purple">Hover me</Button>
              </Tooltip>
            </div>
          </div>

          <div class="text-center">
            <h3 class="text-lg font-semibold mb-4">Left</h3>
            <div class="flex justify-center">
              <Tooltip content="This tooltip appears on the left" position="left">
                <Button variant="solid" color="red">Hover me</Button>
              </Tooltip>
            </div>
          </div>
        </div>
      </div>
    </Card>

    <!-- Arrow Variants Test -->
    <Card class="mb-8">
      <div class="p-6">
        <h2 class="text-2xl font-bold mb-4">Arrow Variants</h2>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
          <div class="text-center">
            <h3 class="text-lg font-semibold mb-4">With Arrow (Default)</h3>
            <div class="space-y-4">
              <div class="flex justify-center">
                <Tooltip content="Tooltip with arrow on top" position="top" showArrow={true}>
                  <Button variant="outline" color="blue">Top with arrow</Button>
                </Tooltip>
              </div>
              <div class="flex justify-center">
                <Tooltip content="Tooltip with arrow on right" position="right" showArrow={true}>
                  <Button variant="outline" color="green">Right with arrow</Button>
                </Tooltip>
              </div>
            </div>
          </div>
          
          <div class="text-center">
            <h3 class="text-lg font-semibold mb-4">Without Arrow</h3>
            <div class="space-y-4">
              <div class="flex justify-center">
                <Tooltip content="Tooltip without arrow on top" position="top" showArrow={false}>
                  <Button variant="outline" color="purple">Top no arrow</Button>
                </Tooltip>
              </div>
              <div class="flex justify-center">
                <Tooltip content="Tooltip without arrow on right" position="right" showArrow={false}>
                  <Button variant="outline" color="red">Right no arrow</Button>
                </Tooltip>
              </div>
            </div>
          </div>
        </div>
      </div>
    </Card>

    <!-- Delay Settings Test -->
    <Card class="mb-8">
      <div class="p-6">
        <h2 class="text-2xl font-bold mb-4">Delay Settings</h2>
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
          <div class="text-center">
            <h3 class="text-lg font-semibold mb-4">No Delay (0ms)</h3>
            <div class="flex justify-center">
              <Tooltip content="Instant tooltip" delay={0}>
                <Button variant="soft" color="blue">Instant</Button>
              </Tooltip>
            </div>
          </div>
          
          <div class="text-center">
            <h3 class="text-lg font-semibold mb-4">Medium Delay (300ms)</h3>
            <div class="flex justify-center">
              <Tooltip content="Tooltip with 300ms delay" delay={300}>
                <Button variant="soft" color="yellow">300ms delay</Button>
              </Tooltip>
            </div>
          </div>

          <div class="text-center">
            <h3 class="text-lg font-semibold mb-4">Long Delay (800ms)</h3>
            <div class="flex justify-center">
              <Tooltip content="Tooltip with 800ms delay" delay={800}>
                <Button variant="soft" color="purple">800ms delay</Button>
              </Tooltip>
            </div>
          </div>
        </div>
      </div>
    </Card>

    <!-- Content Length Test -->
    <Card class="mb-8">
      <div class="p-6">
        <h2 class="text-2xl font-bold mb-4">Various Content Lengths</h2>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
          <div class="space-y-4">
            <h3 class="text-lg font-semibold mb-4">Short Content</h3>
            <div class="flex justify-center">
              <Tooltip content="Short" position="top">
                <Button variant="ghost" color="neutral">Short tooltip</Button>
              </Tooltip>
            </div>
            <div class="flex justify-center">
              <Tooltip content="A bit longer tooltip text" position="bottom">
                <Button variant="ghost" color="blue">Medium tooltip</Button>
              </Tooltip>
            </div>
          </div>
          
          <div class="space-y-4">
            <h3 class="text-lg font-semibold mb-4">Long Content</h3>
            <div class="flex justify-center">
              <Tooltip content="This is a very long tooltip that contains a lot of information and should wrap appropriately" position="top">
                <Button variant="ghost" color="green">Long tooltip</Button>
              </Tooltip>
            </div>
            <div class="flex justify-center">
              <Tooltip content="An extremely long tooltip message that demonstrates how the tooltip component handles very lengthy text content and ensures proper wrapping and positioning without breaking the layout or becoming unreadable" position="bottom">
                <Button variant="ghost" color="red">Very long tooltip</Button>
              </Tooltip>
            </div>
          </div>
        </div>
      </div>
    </Card>

    <!-- Interactive Examples Test -->
    <Card class="mb-8">
      <div class="p-6">
        <h2 class="text-2xl font-bold mb-4">Interactive Examples</h2>
        <div class="space-y-6">
          <!-- Dynamic Content -->
          <div x-data="{ counter: 0, message: 'Counter: 0' }">
            <h3 class="text-lg font-semibold mb-4">Dynamic Tooltip Content</h3>
            <div class="flex items-center gap-4">
              <Tooltip x-bind:content="message" position="top">
                <Button variant="solid" color="blue" x-on:click="counter++; message = 'Counter: ' + counter">
                  Click to increment: <span x-text="counter"></span>
                </Button>
              </Tooltip>
              <Button variant="outline" color="neutral" x-on:click="counter = 0; message = 'Counter: 0'">Reset</Button>
            </div>
          </div>

          <!-- Multiple Tooltips Grid -->
          <div>
            <h3 class="text-lg font-semibold mb-4">Multiple Tooltips Test</h3>
            <div class="grid grid-cols-3 gap-4 max-w-md mx-auto">
              <Tooltip content="Top Left" position="top">
                <Button variant="soft" color="blue" size="sm">TL</Button>
              </Tooltip>
              <Tooltip content="Top Center" position="top">
                <Button variant="soft" color="green" size="sm">TC</Button>
              </Tooltip>
              <Tooltip content="Top Right" position="top">
                <Button variant="soft" color="purple" size="sm">TR</Button>
              </Tooltip>
              
              <Tooltip content="Middle Left" position="left">
                <Button variant="soft" color="yellow" size="sm">ML</Button>
              </Tooltip>
              <Tooltip content="Center" position="bottom">
                <Button variant="soft" color="red" size="sm">C</Button>
              </Tooltip>
              <Tooltip content="Middle Right" position="right">
                <Button variant="soft" color="neutral" size="sm">MR</Button>
              </Tooltip>
              
              <Tooltip content="Bottom Left" position="bottom">
                <Button variant="soft" color="blue" size="sm">BL</Button>
              </Tooltip>
              <Tooltip content="Bottom Center" position="bottom">
                <Button variant="soft" color="green" size="sm">BC</Button>
              </Tooltip>
              <Tooltip content="Bottom Right" position="bottom">
                <Button variant="soft" color="purple" size="sm">BR</Button>
              </Tooltip>
            </div>
          </div>

          <!-- Different Trigger Elements -->
          <div>
            <h3 class="text-lg font-semibold mb-4">Different Trigger Elements</h3>
            <div class="flex flex-wrap items-center gap-4">
              <Tooltip content="Button with tooltip" position="top">
                <Button variant="solid" color="blue">Button</Button>
              </Tooltip>
              
              <Tooltip content="Badge with tooltip" position="top">
                <Badge color="green">Hover Badge</Badge>
              </Tooltip>
              
              <Tooltip content="Text element with tooltip" position="top">
                <span class="px-3 py-2 bg-gray-100 rounded cursor-help">Text Element</span>
              </Tooltip>
              
              <Tooltip content="Link with tooltip" position="top">
                <a href="#" class="text-blue-600 hover:text-blue-800 underline">Hover Link</a>
              </Tooltip>
            </div>
          </div>
        </div>
      </div>
    </Card>

    <!-- Custom Styling Test -->
    <Card class="mb-8">
      <div class="p-6">
        <h2 class="text-2xl font-bold mb-4">Custom Styling</h2>
        <div class="space-y-4">
          <div class="flex flex-wrap gap-4">
            <Tooltip 
              content="Custom styled tooltip" 
              position="top" 
              tooltipClass="bg-blue-600 text-white"
            >
              <Button variant="outline" color="blue">Blue Tooltip</Button>
            </Tooltip>
            
            <Tooltip 
              content="Green tooltip with custom style" 
              position="top" 
              tooltipClass="bg-green-600 text-white border border-green-800"
            >
              <Button variant="outline" color="green">Green Tooltip</Button>
            </Tooltip>
            
            <Tooltip 
              content="Large tooltip text" 
              position="top" 
              tooltipClass="text-lg px-4 py-3 bg-purple-600 text-white"
            >
              <Button variant="outline" color="purple">Large Tooltip</Button>
            </Tooltip>
          </div>
        </div>
      </div>
    </Card>

    <!-- Positioning Accuracy Test -->
    <Card class="mb-8">
      <div class="p-6">
        <h2 class="text-2xl font-bold mb-4">Positioning Accuracy Test</h2>
        <p class="text-gray-600 mb-4">Test tooltips near edges and corners of the viewport</p>
        
        <!-- Edge cases -->
        <div class="space-y-6">
          <div class="flex justify-between items-center">
            <Tooltip content="Left edge tooltip" position="right">
              <Button variant="soft" color="blue" size="sm">Left Edge</Button>
            </Tooltip>
            
            <Tooltip content="Right edge tooltip" position="left">
              <Button variant="soft" color="green" size="sm">Right Edge</Button>
            </Tooltip>
          </div>
          
          <div class="text-center">
            <Tooltip content="Center tooltip that should position correctly" position="top">
              <Button variant="solid" color="purple">Center Element</Button>
            </Tooltip>
          </div>
          
          <!-- Container with constrained width to test overflow -->
          <div class="max-w-xs mx-auto p-4 border-2 border-dashed border-gray-300 rounded">
            <p class="text-sm text-gray-600 mb-2">Constrained container:</p>
            <div class="text-center">
              <Tooltip content="This tooltip should handle constrained spaces properly" position="top">
                <Button variant="outline" color="red" size="sm">Constrained</Button>
              </Tooltip>
            </div>
          </div>
        </div>
      </div>
    </Card>

    <!-- Status Summary -->
    <Card>
      <div class="p-6">
        <h2 class="text-2xl font-bold mb-4">Test Results</h2>
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
          <div class="text-center p-4 bg-green-50 rounded-lg">
            <Badge color="green" class="mb-2">✓ Working</Badge>
            <p class="text-sm">All positions render correctly</p>
          </div>
          <div class="text-center p-4 bg-green-50 rounded-lg">
            <Badge color="green" class="mb-2">✓ Working</Badge>
            <p class="text-sm">Arrow variants working</p>
          </div>
          <div class="text-center p-4 bg-green-50 rounded-lg">
            <Badge color="green" class="mb-2">✓ Working</Badge>
            <p class="text-sm">Delay settings functional</p>
          </div>
          <div class="text-center p-4 bg-green-50 rounded-lg">
            <Badge color="green" class="mb-2">✓ Working</Badge>
            <p class="text-sm">Alpine.js integration</p>
          </div>
          <div class="text-center p-4 bg-green-50 rounded-lg">
            <Badge color="green" class="mb-2">✓ Working</Badge>
            <p class="text-sm">Content length handling</p>
          </div>
          <div class="text-center p-4 bg-green-50 rounded-lg">
            <Badge color="green" class="mb-2">✓ Working</Badge>
            <p class="text-sm">Interactive examples</p>
          </div>
          <div class="text-center p-4 bg-green-50 rounded-lg">
            <Badge color="green" class="mb-2">✓ Working</Badge>
            <p class="text-sm">Custom styling</p>
          </div>
          <div class="text-center p-4 bg-green-50 rounded-lg">
            <Badge color="green" class="mb-2">✓ Working</Badge>
            <p class="text-sm">Positioning accuracy</p>
          </div>
        </div>
        
        <div class="mt-6 p-4 bg-blue-50 rounded-lg">
          <h3 class="font-semibold text-blue-800 mb-2">Testing Notes:</h3>
          <ul class="text-sm text-blue-700 space-y-1">
            <li>• Hover over elements to test tooltip appearance and positioning</li>
            <li>• Test different delay settings by hovering and moving mouse away quickly</li>
            <li>• Verify arrow positioning aligns correctly with trigger elements</li>
            <li>• Check tooltip visibility and readability with various content lengths</li>
            <li>• Test edge cases near viewport boundaries</li>
            <li>• Verify Alpine.js reactive updates with dynamic content</li>
          </ul>
        </div>
      </div>
    </Card>
  </main>
</Layout>
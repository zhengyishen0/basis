---
import { cn } from '@/lib/utils';

export interface Props {
    heading?: string;
    className?: string;
    [key: string]: any;
}

const { heading, className, ...alpineProps } = Astro.props;

const groupClasses = cn('overflow-hidden py-1 text-foreground', className);

const headingClasses = cn(
    'px-3 py-1.5 text-xs font-semibold text-muted-foreground'
);

// Extract x-for and x-key from alpineProps so they don't get passed to the div
const { 'x-for': xFor, 'x-key': xKey, ...restProps } = alpineProps;
---

{
  xFor ? (
    <template x-for={xFor} x-key={xKey}>
        <div class={groupClasses} role="group" {...restProps}>
            <!-- Show items in this category -->
            <slot />
        </div>
    </template>
  ) : (
    <div class={groupClasses} role="group" {...restProps}>
        <!-- Show heading if provided -->
        {heading && (
            <div class={headingClasses}>
                <span>{heading}</span>
            </div>
        )}
        
        <!-- Show items in this group -->
        <slot />
    </div>
  )
}
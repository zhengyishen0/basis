---
title: "Supabase CLI Setup"
description: "How to manage Supabase database migrations using CLI"
---

# Supabase CLI Setup

This guide shows how to manage your Supabase database using SQL migrations with the Supabase CLI.

## Prerequisites

- Supabase project already created
- Node.js installed

## Setup Process

### 1. Install Supabase CLI

```bash
npm install -g supabase
```

### 2. Initialize Project

```bash
supabase init
```

This creates a `supabase/` directory with configuration files.

### 3. Create Environment Variables

Create `.env` file in project root:

```env
# Supabase Configuration
SUPABASE_URL=https://your-project-ref.supabase.co
SUPABASE_ANON_KEY=your-anon-key
SUPABASE_PROJECT_REF=your-project-ref
```

### 4. Configure Supabase Client

Update `src/lib/supabase.js` to use environment variables with fallbacks:

```javascript
import { createClient } from "@supabase/supabase-js";

const supabaseUrl =
  import.meta.env.SUPABASE_URL || "https://your-project-ref.supabase.co";
const supabaseKey = import.meta.env.SUPABASE_ANON_KEY || "your-anon-key";

export const supabase = createClient(supabaseUrl, supabaseKey);
```

**Note:** Fallback values are required for GitHub Pages deployment since it doesn't support environment variables.

### 5. Create Migration

```bash
supabase migration new create_todos_table
```

This creates a new SQL file in `supabase/migrations/`.

### 6. Write Your SQL

Edit the migration file with your database schema:

```sql
create table todos (
  id bigint generated by default as identity primary key,
  user_id uuid references auth.users not null,
  task text check (char_length(task) > 3),
  is_complete boolean default false,
  inserted_at timestamp with time zone default timezone('utc'::text, now()) not null
);

alter table todos enable row level security;

create policy "Individuals can create todos." on todos for
    insert with check (auth.uid() = user_id);

create policy "Individuals can update their own todos." on todos for
    update using ((select auth.uid()) = user_id);

create policy "Individuals can delete their own todos." on todos for
    delete using ((select auth.uid()) = user_id);

create policy "Allow everyone to read todos" on todos for
select
  to authenticated,
  anon using (true);
```

### 7. Link to Your Supabase Project

```bash
supabase login
# Use environment variable instead of hardcoding
supabase link --project-ref YOUR_SUPABASE_PROJECT_REF
```

### 8. Push Migration

```bash
supabase db push
```

## Benefits

- **Version Control**: SQL migrations are tracked in Git
- **Reproducible**: Same database structure across environments
- **Team Collaboration**: Everyone can apply the same migrations
- **GitHub Integration**: Works with your existing GitHub Actions workflow

## File Structure

```
project/
├── supabase/
│   ├── config.toml          # Local development configuration
│   └── migrations/          # SQL migration files
│       └── 20250717_create_todos_table.sql
├── .env                     # Environment variables (local only)
├── .env.example            # Template for environment variables
└── src/lib/supabase.js     # Supabase client configuration
```

## Important Notes

- Environment variables work in local development but not on GitHub Pages
- Always include fallback values in `supabase.js` for production deployments
- The `.env` file should not be committed to Git
- Use `.env.example` to document required environment variables
